var WebDataRocksToolbar=function(e,t,n,a,c){this.pivot=t,this.pivotContainer=e,this.width=typeof a=="number"||0>a.indexOf("px")&&0>a.indexOf("%")?a+"px":a,this.Labels=c};WebDataRocksToolbar.prototype.getTabs=function(){var e=[],t=this.Labels;return e.push({title:t.connect,id:"wdr-tab-connect",icon:this.icons.connect,menu:[{title:t.connect_local_csv,id:"wdr-tab-connect-local-csv",handler:this.connectLocalCSVHandler,mobile:!1,icon:this.icons.connect_csv},{title:t.connect_local_json,id:"wdr-tab-connect-local-json",handler:this.connectLocalJSONHandler,mobile:!1,icon:this.icons.connect_json},{title:this.osUtils.isMobile?t.connect_remote_csv_mobile:t.connect_remote_csv,id:"wdr-tab-connect-remote-csv",handler:this.connectRemoteCSV,icon:this.icons.connect_csv},{title:this.osUtils.isMobile?t.connect_remote_json_mobile:t.connect_remote_json,id:"wdr-tab-connect-remote-json",handler:this.connectRemoteJSON,icon:this.icons.connect_json}]}),e.push({title:t.open,id:"wdr-tab-open",icon:this.icons.open,menu:[{title:t.local_report,id:"wdr-tab-open-local-report",handler:this.openLocalReport,mobile:!1,icon:this.icons.open_local},{title:this.osUtils.isMobile?t.remote_report_mobile:t.remote_report,id:"wdr-tab-open-remote-report",handler:this.openRemoteReport,icon:this.icons.open_remote}]}),e.push({title:t.save,id:"wdr-tab-save",handler:this.saveHandler,mobile:!1,icon:this.icons.save}),e.push({title:t.export,id:"wdr-tab-export",mobile:!1,icon:this.icons.export,menu:[{title:t.export_print,id:"wdr-tab-export-print",handler:this.printHandler,icon:this.icons.export_print},{title:t.export_html,id:"wdr-tab-export-html",handler:this.exportHandler,args:"html",icon:this.icons.export_html},{title:t.export_excel,id:"wdr-tab-export-excel",handler:this.exportHandler,args:"excel",icon:this.icons.export_excel},{title:t.export_pdf,id:"wdr-tab-export-pdf",handler:this.exportHandler,args:"pdf",icon:this.icons.export_pdf}]}),e.push({title:t.format,id:"wdr-tab-format",icon:this.icons.format,rightGroup:!0,menu:[{title:this.osUtils.isMobile?t.format_cells_mobile:t.format_cells,id:"wdr-tab-format-cells",handler:this.formatCellsHandler,icon:this.icons.format_number},{title:this.osUtils.isMobile?t.conditional_formatting_mobile:t.conditional_formatting,id:"wdr-tab-format-conditional",handler:this.conditionalFormattingHandler,icon:this.icons.format_conditional}]}),e.push({title:t.options,id:"wdr-tab-options",handler:this.optionsHandler,icon:this.icons.options,rightGroup:!0}),e.push({title:t.fields,id:"wdr-tab-fields",handler:this.fieldsHandler,icon:this.icons.fields,rightGroup:!0}),document.addEventListener!=null&&e.push({title:t.fullscreen,id:"wdr-tab-fullscreen",handler:this.fullscreenHandler,mobile:!1,icon:this.icons.fullscreen,rightGroup:!0}),e},WebDataRocksToolbar.prototype.create=function(){this.popupManager=new WebDataRocksToolbar.PopupManager(this),this.dataProvider=this.getTabs(),this.init()},WebDataRocksToolbar.prototype.applyToolbarLayoutClasses=function(){if(!this.osUtils.isMobile){var e=this,t=function(){if(e.toolbarWrapper){var n=e.toolbarWrapper.getBoundingClientRect().width;e.toolbarWrapper.classList.remove("wdr-layout-500"),e.toolbarWrapper.classList.remove("wdr-layout-360"),e.toolbarWrapper.classList.remove("wdr-layout-300"),500>n&&e.toolbarWrapper.classList.add("wdr-layout-500"),360>n&&e.toolbarWrapper.classList.add("wdr-layout-360"),300>n&&e.toolbarWrapper.classList.add("wdr-layout-300")}};t(),window.addEventListener("resize",t)}},WebDataRocksToolbar.prototype.init=function(){this.container=this.pivotContainer,this.container.style.position=this.container.style.position==""?"relative":this.container.style.position,this.toolbarWrapper=document.createElement("div"),this.toolbarWrapper.id="wdr-toolbar-wrapper",this.toolbarWrapper.style.width=this.width,this.osUtils.isMobile&&this.addClass(this.toolbarWrapper,"wdr-mobile"),this.addClass(this.toolbarWrapper,"wdr-toolbar-ui"),this.toolbarWrapper.style.width=this.width;var e=document.createElement("ul");e.id="wdr-toolbar";var t=document.createElement("div");t.classList.add("wdr-toolbar-group-right"),e.appendChild(t);for(var n=0;n<this.dataProvider.length;n++)if(!this.isDisabled(this.dataProvider[n]))if(this.osUtils.isMobile&&this.dataProvider[n].menu!=null&&this.dataProvider[n].collapse!=!0)for(var a=0;a<this.dataProvider[n].menu.length;a++)this.isDisabled(this.dataProvider[n].menu[a])||e.appendChild(this.createTab(this.dataProvider[n].menu[a]));else a=this.dataProvider[n].divider?this.createDivider(this.dataProvider[n]):this.createTab(this.dataProvider[n]),t&&this.dataProvider[n].rightGroup?t.appendChild(a):e.appendChild(a);this.toolbarWrapper.appendChild(e),this.container.insertBefore(this.toolbarWrapper,this.container.firstChild),this.updateLabels(this.Labels),this.applyToolbarLayoutClasses()},WebDataRocksToolbar.prototype.updateLabels=function(e){e=this.Labels=e,this.setText(document.querySelector("#wdr-tab-connect > a > span"),e.connect),this.setText(document.querySelector("#wdr-tab-connect-local-csv > a > span"),e.connect_local_csv),this.setText(document.querySelector("#wdr-tab-connect-local-json > a > span"),e.connect_local_json),this.setText(document.querySelector("#wdr-tab-connect-remote-csv > a > span"),this.osUtils.isMobile?e.connect_remote_csv_mobile:e.connect_remote_csv),this.setText(document.querySelector("#wdr-tab-open > a > span"),e.open),this.setText(document.querySelector("#wdr-tab-open-local-report > a > span"),e.local_report),this.setText(document.querySelector("#wdr-tab-open-remote-report > a > span"),this.osUtils.isMobile?e.remote_report_mobile:e.remote_report),this.setText(document.querySelector("#wdr-tab-save > a > span"),e.save),this.setText(document.querySelector("#wdr-tab-format > a > span"),e.format),this.setText(document.querySelector("#wdr-tab-format-cells > a > span"),this.osUtils.isMobile?e.format_cells_mobile:e.format_cells),this.setText(document.querySelector("#wdr-tab-format-conditional > a > span"),this.osUtils.isMobile?e.conditional_formatting_mobile:e.conditional_formatting),this.setText(document.querySelector("#wdr-tab-options > a > span"),e.options),this.setText(document.querySelector("#wdr-tab-fullscreen > a > span"),e.fullscreen),this.setText(document.querySelector("#wdr-tab-export > a > span"),e.export),this.setText(document.querySelector("#wdr-tab-export-print > a > span"),e.export_print),this.setText(document.querySelector("#wdr-tab-export-html > a > span"),e.export_html),this.setText(document.querySelector("#wdr-tab-export-excel > a > span"),e.export_excel),this.setText(document.querySelector("#wdr-tab-export-pdf > a > span"),e.export_pdf),this.setText(document.querySelector("#wdr-tab-fields > a > span"),e.fields)},WebDataRocksToolbar.prototype.icons={connect:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><path fill="#555" d="M-274.5 425.409s-.988.277-1.422.761l-3.536-1.783c.189-.509.258-1.066.07-1.572l3.719-1.76a2.36 2.36 0 0 0 3.317.147 2.341 2.341 0 0 0 .157-3.3 2.335 2.335 0 0 0-4.055 1.582c-.009.122-.008.237.001.358l-3.896 1.884a2.281 2.281 0 0 0-1.359-.451 2.338 2.338 0 0 0-2.177 2.481 2.33 2.33 0 0 0 2.177 2.179c.491 0 .967-.156 1.359-.451l3.921 1.892a2.317 2.317 0 0 0 1.981 2.604 2.316 2.316 0 0 0 2.604-1.981c.171-1.269-1-2.432-2.262-2.603a8.794 8.794 0 0 0-.6-.026v.039zM-301.592 413.883c-.008.105-.908.222.092.326v6.836c0 2.587 5.827 5.455 13.177 5.455h1.081c-1.146-3 .303-6.854 3.299-8.155-1.448.172-2.868.069-4.334.069-7.056.009-12.775-2.093-13.315-4.531z"/><path fill="#555" d="M-288.5 416.217c7.377 0 13-2.097 13-4.683v-6.853c0-2.586-5.647-4.682-13-4.682-7.352 0-13 2.104-13 4.69v6.853c0 2.586 5.648 4.675 13 4.675zm.177-15.268c5.903 0 10.691 1.661 10.691 3.741s-4.796 3.741-10.691 3.741c-5.894 0-10.683-1.67-10.683-3.741 0-2.072 4.79-3.741 10.683-3.741z"/></svg>',connect_csv:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M11 24l6 0V27h-6V24z"/><path d="M12.8 22L12.8 22l1.2-2.5L15.1 22h1.9l-2-3.9L16.9 14h-1.8l-1 2.5L12.9 14h-1.8l1.9 3.9L11 22H12.8z"/><path d="M19 19h6v3h-6V19z"/><path d="M19 14h6v3L19 17V14z"/><path d="M19 24h6v3h-6V24z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',connect_json:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/><path d="M19 24c0 0.6-0.4 1-1 1 -0.6 0-1-0.4-1-1v-2c0-0.6 0.4-1 1-1 0.6 0 1 0.4 1 1V24zM21 18v-2c0-0.6-0.4 0-1 0 -0.6 0-1-0.4-1-1 0-0.6 0.4-1 1-1 1.7 0 3 0.3 3 2v2c0 1.1 0.9 2 2 2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -1.1 0-2 0.9-2 2v2c0 1.7-1.3 2-3 2 -0.6 0-1-0.4-1-1s0.4-1 1-1c0.6 0 1 0.6 1 0v-2c0-1.2 0.5-2.3 1.4-3C21.5 20.3 21 19.2 21 18zM11 20c1.1 0 2-0.9 2-2v-2c0-1.7 1.3-2 3-2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -0.6 0-1-0.6-1 0v2c0 1.2-0.5 2.3-1.4 3 0.8 0.7 1.4 1.8 1.4 3v2c0 0.6 0.4 0 1 0 0.6 0 1 0.4 1 1s-0.4 1-1 1c-1.7 0-3-0.3-3-2v-2c0-1.1-0.9-2-2-2 -0.6 0-1-0.4-1-1C10 20.4 10.4 20 11 20z"/><path d="M18 17c0.6 0 1 0.4 1 1s-0.4 1-1 1 -1-0.4-1-1S17.4 17 18 17z"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><path fill="#555" d="M-279.351 408.5h8.976c.064 0 .126-.067.167-.025.021.052.021.055 0 .107l-2.053 20.701c-.01.117-.104.217-.219.217h-30.102c-.116 0-.21-.104-.221-.22l-1.989-16.009c-.022-.041-.022.124 0 .083.042-.054.115.146.178.146h21.198c.87 0 1.665-.726 2.053-1.499l1.812-3.446a.414.414 0 0 1 .2-.055zm-4.052 2.473c.084-.011.162-.052.194-.126l1.813-3.288c.408-.754 1.196-1.059 2.054-1.059h7.842v-2.637c0-1.102-.83-2.166-1.929-2.25-.053 0-.183-.113-.235-.113h-18.328c-.104 0-.188.006-.241-.09.01-1.1-.858-1.91-1.958-1.91h-6.902c-1.226 0-2.406.864-2.406 2.089v9.426l20.096-.042z"/></svg>',open_local:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><style>.a{fill:none;}</style><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><line x1="11" y1="23" x2="11" y2="23" class="a"/><line x1="25" y1="23" x2="25" y2="23" class="a"/><polygon points="11 15 11 23 17 23 17 25 14 25 14 26 22 26 22 25 19 25 19 23 25 23 25 15 "/></svg>',open_remote:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><path d="M24.8 18.1l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -1.3-1.2-3.2-1.9-5.3-1.9 -2.1 0-4 0.7-5.3 1.9 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.1-0.1-0.2-0.2-0.2-0.3 0-0.1 0.1-0.2 0.2-0.3 1.7-1.5 4.1-2.5 6.8-2.5 2.7 0 5.1 0.9 6.8 2.5 0.1 0 0.2 0.2 0.2 0.3C25 17.9 24.9 18 24.8 18.1zM18 19.6c1.5 0 2.8 0.5 3.8 1.4 0.2 0.2 0.2 0.5 0 0.7l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -0.6-0.5-1.4-0.8-2.3-0.8 -0.9 0-1.7 0.3-2.3 0.8 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.2-0.2-0.2-0.5 0-0.7C15.2 20.1 16.5 19.6 18 19.6zM18 23.4c0.8 0 1.4 0.6 1.4 1.3 0 0.7-0.6 1.3-1.4 1.3 -0.8 0-1.4-0.6-1.4-1.3C16.6 24 17.2 23.4 18 23.4z"/></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><g fill="#555"><path d="M15.191 783.284l-5.457-5.467a1.101 1.101 0 0 0-.781-.317h-.835c-.2 0-.618.163-.618.363v8.889c0 .618-.245.748-.853.748H-5.638c-.617 0-.862-.14-.862-.748v-8.889c0-.2-.409-.363-.609-.363h-6.283c-.618 0-1.108.499-1.108 1.107v27.785c0 .617.5 1.107 1.108 1.107h27.784c.618 0 1.108-.499 1.108-1.107v-22.337c0-.29-.109-.562-.309-.771zM8.98 801.463c0 .618-.499 1.037-1.107 1.037H-6.873c-.617 0-.627-.357-.627-.966v-8.626c0-.617.019-1.408.627-1.408H7.882c.618 0 1.108.613 1.108 1.223l-.01 8.74z"/><path d="M-4.167 784.5h9.361c.2 0 .306.228.306.028v-6.665c0-.2-.106-.363-.306-.363h-9.361c-.2 0-.333.163-.333.363v6.665c0 .191.124-.028.333-.028zm5.667-4.294c0-.618.392-1.108 1-1.108.618 0 1 .5 1 1.108v1.97c0 .618-.392 1.108-1 1.108-.618 0-1-.5-1-1.108v-1.97zM4.168 796.5h-7.31c-.617 0-1.108.393-1.108 1s.5 1 1.108 1h7.31c.617 0 1.107-.393 1.107-1s-.498-1-1.107-1z"/></g></svg>',export:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><g fill="#555"><path d="M15.446 795.615l-4.289-6.461c-.346-.515-.803-.654-1.428-.654H7.788c-.186 0-.346-.029-.363.156-.008.076.017.07.059.137l4.76 7.108c.042.06.034.337-.017.38-.025.025-.067.219-.102.219H6.699c-.194 0-.354-.063-.363.125-.305 3.23-3.174 5.495-6.407 5.192-2.81-.263-5.039-2.329-5.3-5.14-.009-.195-.168-.178-.363-.178h-5.401c-.076 0-.144-.281-.144-.357 0-.025.008-.157.017-.175l4.76-7.203c.102-.16.05-.245-.109-.347-.06-.035-.118.082-.187.082h-1.94c-.616 0-1.199.145-1.553.658l-4.664 6.547c-.203.304-.545.586-.545.95v9.216c1 .911 1.267 1.646 2.187 1.629h27.625c.903.009 1.188-.709 1.188-1.611v-9.233c1-.373.157-.735-.054-1.04z"/><path d="M-3.674 783.5H-2.5v10.2c1 1.4 1.764 2.464 3.165 2.371 1.274-.083 1.835-1.097 2.835-2.371v-10.2h1.207c.346 0 .641-.04.65-.387.008-.151-.042-.193-.144-.311l-4.186-5.11c-.228-.287-.642-.302-.929-.073-.042.034-.076.081-.101.115l-4.135 5.172c-.22.271-.187.447.084.668.11.085.244-.074.38-.074z"/></g></svg>',export_print:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><path fill="#555" d="M-5.5 798.685v3.815h11v-7h-11v3.185zm2-1.185h7v1h-7v-1zm0 2h7v1h-7v-1zM5.5 786.308V782.5h-11v7h11z"/><path fill="#555" d="M8.94 786.5H7.5v4h-14v-4h-1.44c-1.493 0-2.56 1.064-2.56 2.558v6.87c0 1.493 1.067 2.572 2.56 2.572h1.44v-4h14v4h1.44c1.493 0 2.56-1.064 2.56-2.557v-6.878c0-1.501-1.074-2.565-2.56-2.565z"/></svg>',export_excel:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M24.4 15h-3.8L18 18.6 15.3 15h-3.8l4.5 5.2L11 27h7.3L18 25h-2l2-3L21.1 27H25l-5.1-6.8L24.4 15z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_html:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M25.7 20.8l-2.3-2.5c-0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3 -0.3 0.4-0.3 1 0 1.4l1.7 1.9 -1.7 1.9c-0.2 0.2-0.3 0.4-0.3 0.7 0 0.3 0.1 0.5 0.3 0.7 0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3l2.3-2.5C26.1 21.8 26.1 21.2 25.7 20.8z"/><path d="M14 24c0-0.3-0.1-0.5-0.3-0.7l-1.7-1.9 1.7-1.9c0.3-0.4 0.3-1 0-1.4 -0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3l-2.3 2.5c-0.3 0.4-0.3 1 0 1.4l2.3 2.5c0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3C13.9 24.5 14 24.3 14 24z"/><path d="M20.4 15.1c-0.1 0-0.2-0.1-0.3-0.1 -0.4 0-0.8 0.3-0.9 0.6l-4.1 11.1c-0.1 0.2-0.1 0.5 0 0.7 0.1 0.2 0.3 0.4 0.5 0.5C15.7 28 15.8 28 16 28c0.4 0 0.8-0.3 0.9-0.6l4.1-11.1C21.1 15.8 20.9 15.2 20.4 15.1z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_pdf:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M17.2 17.1L17.2 17.1C17.3 17.1 17.3 17.1 17.2 17.1c0.1-0.5 0.2-0.7 0.2-1V15.8c0.1-0.6 0.1-1 0-1.1 0 0 0 0 0-0.1l-0.1-0.1 0 0 0 0c0 0 0 0.1-0.1 0.1C16.9 15.2 16.9 16 17.2 17.1L17.2 17.1zM13.8 24.8c-0.2 0.1-0.4 0.2-0.6 0.3 -0.8 0.7-1.3 1.5-1.5 1.8l0 0 0 0 0 0C12.5 26.9 13.1 26.2 13.8 24.8 13.9 24.8 13.9 24.8 13.8 24.8 13.9 24.8 13.8 24.8 13.8 24.8zM24.1 23.1c-0.1-0.1-0.6-0.5-2.1-0.5 -0.1 0-0.1 0-0.2 0l0 0c0 0 0 0 0 0.1 0.8 0.3 1.6 0.6 2.1 0.6 0.1 0 0.1 0 0.2 0l0 0h0.1c0 0 0 0 0-0.1l0 0C24.2 23.3 24.1 23.3 24.1 23.1zM24.6 24c-0.2 0.1-0.6 0.2-1 0.2 -0.9 0-2.2-0.2-3.4-0.8 -1.9 0.2-3.4 0.5-4.5 0.9 -0.1 0-0.1 0-0.2 0.1 -1.3 2.4-2.5 3.5-3.4 3.5 -0.2 0-0.3 0-0.4-0.1l-0.6-0.3v-0.1c-0.1-0.2-0.1-0.3-0.1-0.6 0.1-0.6 0.8-1.6 2.1-2.4 0.2-0.1 0.6-0.3 1-0.6 0.3-0.6 0.7-1.2 1.1-2 0.6-1.1 0.9-2.3 1.2-3.3l0 0c-0.4-1.4-0.7-2.1-0.2-3.7 0.1-0.5 0.4-0.9 0.9-0.9h0.2c0.2 0 0.4 0.1 0.7 0.2 0.8 0.8 0.4 2.6 0 4.1 0 0.1 0 0.1 0 0.1 0.4 1.2 1.1 2.3 1.8 2.9 0.3 0.2 0.6 0.5 1 0.7 0.6 0 1-0.1 1.5-0.1 1.3 0 2.2 0.2 2.6 0.8 0.1 0.2 0.1 0.5 0.1 0.7C24.9 23.5 24.8 23.8 24.6 24zM17.3 19.6c-0.2 0.8-0.7 1.7-1.1 2.7 -0.2 0.5-0.4 0.8-0.7 1.2h0.1 0.1l0 0c1.5-0.6 2.8-0.9 3.7-1 -0.2-0.1-0.3-0.2-0.4-0.3C18.4 21.6 17.7 20.7 17.3 19.6z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',format:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><g fill="#555"><path d="M15.144 781.92a7.62 7.62 0 0 0-4.238-4.157 4.634 4.634 0 0 0-1.201-.254.99.99 0 0 0-.906.36l-10.797 10.829c-1.462 1.462-2.916 2.908-4.37 4.378a1.347 1.347 0 0 0-.326.596c-.481 2.197-.939 4.402-1.413 6.607a.639.639 0 0 0 .792.793l6.551-1.381c.253-.049.49-.171.67-.359 5.063-5.08 10.127-10.144 15.19-15.207.237-.229.384-.548.4-.882a8.491 8.491 0 0 0-.352-1.323zm-16.825 16.652l-2.54.531a2.367 2.367 0 0 0-1.911-1.87c.18-.906.384-1.813.571-2.729a2.05 2.05 0 0 1 1.078.229 6.007 6.007 0 0 1 2.671 2.605c.139.318.245.653.311.996 0 .157 0 .157-.18.238z"/><path d="M6.568 804.5H-11.5v-18h7.761l1.83-2.118 1.593-1.882h-12.455c-.947 0-1.729 1.241-1.729 2.18v21.097c0 .947.77 1.724 1.726 1.724H8.283c.947 0 2.217-.769 2.217-1.724v-12.488l-4 3.438v7.773h.068z"/></g></svg>',format_number:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><path d="M31 19.2v-3.4l2.5-0.4c0.2-0.7 0.5-1.4 0.9-2.1l-1.4-2 2.4-2.4 2 1.4c0.7-0.4 1.4-0.7 2.1-0.9l0.4-2.5h3.4l0.4 2.5c0.7 0.2 1.4 0.5 2.1 0.9l2-1.4 2.4 2.4 -1.4 2c0.4 0.7 0.7 1.4 0.9 2.1L52 15.8v3.4l-2.5 0.4c-0.2 0.7-0.5 1.4-0.9 2.1l1.4 2 -2.4 2.4 -2-1.5c-0.7 0.4-1.4 0.7-2.1 0.9l-0.4 2.5h-3.4l-0.4-2.5c-0.7-0.2-1.4-0.5-2.1-0.9l-2 1.5 -2.4-2.4 1.4-2c-0.4-0.7-0.7-1.4-0.9-2.1L31 19.2zM41.5 21c1.9 0 3.5-1.6 3.5-3.5 0-1.9-1.6-3.5-3.5-3.5 -1.9 0-3.5 1.6-3.5 3.5C38 19.4 39.6 21 41.5 21z"/><path d="M38 30H1V6h36V5H0v26h38V30L38 30z"/><path d="M9.4 21.1c-0.3 0.3-0.7 0.4-1.2 0.4 -0.5 0-0.9-0.2-1.2-0.5s-0.4-0.8-0.4-1.4H5c0 0.9 0.2 1.7 0.7 2.2 0.5 0.6 1.2 0.9 2 1v1.3h1.1v-1.4c0.8-0.1 1.5-0.4 1.9-0.9 0.5-0.5 0.7-1.1 0.7-1.9 0-0.4-0.1-0.8-0.2-1.1 -0.1-0.3-0.3-0.6-0.5-0.8 -0.2-0.2-0.5-0.4-0.8-0.6 -0.3-0.2-0.8-0.4-1.4-0.6 -0.6-0.2-1-0.4-1.2-0.7s-0.4-0.6-0.4-1c0-0.4 0.1-0.8 0.4-1 0.2-0.2 0.6-0.4 1-0.4 0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.8 0.4 1.4h1.6c0-0.9-0.2-1.6-0.6-2.2 -0.4-0.6-1-0.9-1.8-1v-1.5H7.9v1.5C7.1 12.6 6.5 12.9 6 13.4s-0.7 1.1-0.7 1.9c0 1.1 0.5 2 1.6 2.6 0.3 0.2 0.8 0.4 1.3 0.6 0.6 0.2 1 0.4 1.2 0.7s0.4 0.6 0.4 1C9.8 20.5 9.7 20.8 9.4 21.1z"/><path d="M16.3 12.6h-0.2l-3.8 1.5v1.4l2.4-0.8v8.1h1.6V12.6z"/><path d="M19.9 23.8c0.2-0.5 0.4-1 0.4-1.5l0-1.2h-1.5v1.3c0 0.3-0.1 0.6-0.2 1 -0.1 0.3-0.3 0.7-0.5 1.1l0.9 0.5C19.3 24.7 19.6 24.3 19.9 23.8z"/><path d="M27 16.7c0-1.4-0.3-2.5-0.8-3.2s-1.3-1.1-2.4-1.1c-1.1 0-1.9 0.4-2.4 1.1 -0.5 0.7-0.8 1.8-0.8 3.3v1.8c0 1.4 0.3 2.5 0.8 3.2s1.3 1.1 2.4 1.1c1.1 0 1.9-0.4 2.4-1.1 0.5-0.7 0.8-1.8 0.8-3.3V16.7zM25.4 18.9c0 0.9-0.1 1.6-0.4 2 -0.2 0.4-0.6 0.6-1.2 0.6 -0.5 0-0.9-0.2-1.2-0.7 -0.3-0.5-0.4-1.2-0.4-2.1v-2.3c0-0.9 0.1-1.5 0.4-2 0.3-0.4 0.6-0.6 1.2-0.6 0.5 0 0.9 0.2 1.2 0.7 0.3 0.4 0.4 1.1 0.4 2.1V18.9z"/></svg>',format_conditional:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><polygon points="38 5 0 5 0 31 26 31 26 30 1 30 1 6 37 6 37 10 38 10 "/><path d="M9 13H8.6L5 14.4v1.4l2-0.8V23h2V13z"/><path d="M17 22h-4l2.4-2.9c0.6-0.7 1-1.3 1.3-1.8 0.3-0.5 0.4-1.1 0.4-1.5 0-0.8-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.2-0.7 -0.6 0-1.2 0.1-1.7 0.4s-0.9 0.6-1.1 1C11.1 14.9 11 16 11 16h1.6c0 0 0.1-0.9 0.4-1.3s0.7-0.4 1.2-0.4c0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.7 0.4 1.1 0 0.4-0.1 0.7-0.3 1.1 -0.2 0.4-0.6 0.8-1.1 1.3L11 21.9V23h6V22z"/><path d="M21 19h0.8c0.6 0 1-0.1 1.3 0.2 0.3 0.3 0.4 0.6 0.4 1.1 0 0.5-0.1 0.8-0.4 1.1 -0.3 0.3-0.6 0.4-1.1 0.4 -0.5 0-0.8-0.3-1.1-0.5C20.6 20.9 20.5 21 20.5 20h-1.5c0 1 0.3 1.6 0.8 2.1s1.3 0.8 2.1 0.8c0.9 0 1.6-0.2 2.2-0.7 0.6-0.5 0.8-1.2 0.8-2.1 0-0.5-0.1-1-0.4-1.4 -0.3-0.4-0.6-0.7-1.1-0.9 0.4-0.2 0.7-0.5 1-0.9 0.3-0.4 0.4-0.8 0.4-1.2 0-0.9-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.1-0.7 -0.5 0-1 0.1-1.5 0.3 -0.4 0.2-0.8 0.7-1 1.1S19.1 15 19.1 16h1.5c0-1 0.1-0.9 0.4-1.1 0.3-0.3 0.6-0.5 1-0.5 0.5 0 0.8 0.1 1 0.3s0.3 0.6 0.3 1.1c0 0.5-0.1 0.7-0.4 1C22.7 17 22.3 17 21.9 17H21V19z"/><path d="M47.8 7C50.1 7 52 8.9 52 11.2c0 1-0.3 1.8-0.8 2.5l-1.7 1.7L43.6 9.5l1.7-1.7C46 7.3 46.8 7 47.8 7zM30.7 22.4L29 30l7.6-1.7 11.6-11.6 -5.9-5.9L30.7 22.4zM42 17.9l-5.1 5.1 -0.9-0.9 5.1-5L42 17.9z"/></svg>',options:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><path fill="#555" d="M11.363 789.058l-.76-1.838a33.692 33.692 0 0 0 1.601-4.223l-2.327-2.328a31.444 31.444 0 0 0-4.142 1.691l-1.829-.76a32.88 32.88 0 0 0-1.83-4.101h-3.291a32.106 32.106 0 0 0-1.731 4.133l-1.83.76a33.556 33.556 0 0 0-4.206-1.609l-2.328 2.32a31.563 31.563 0 0 0 1.69 4.141l-.759 1.838a34.366 34.366 0 0 0-4.117 1.838v3.3a32.519 32.519 0 0 0 4.117 1.731l.759 1.829a33.633 33.633 0 0 0-1.608 4.223l2.327 2.328a32.986 32.986 0 0 0 4.133-1.699l1.83.76a31.481 31.481 0 0 0 1.862 4.108h3.291a32.194 32.194 0 0 0 1.732-4.133l1.837-.76a33.57 33.57 0 0 0 4.207 1.609l2.327-2.328a31.481 31.481 0 0 0-1.69-4.141l.76-1.838a32.532 32.532 0 0 0 4.108-1.829v-3.3a30.142 30.142 0 0 0-4.133-1.722zM.5 799.202a6.706 6.706 0 1 1 6.706-6.706A6.71 6.71 0 0 1 .5 799.202z"/></svg>',fields:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><g fill="#555"><path d="M11.351 787.279c1.112.367 2.027 1.221 2.55 2.221H13.5v-10.627c0-.744-.089-1.357-.825-1.373h-26.339c-.736.008-.836.612-.836 1.349v21.656c0 .735.093.995.836.995h10.836c-.008 0 .205-1.314.629-2.025-.073-.098-.123.025-.18.025H-12.5v-6h10.563l.83-1.699c.4-.76 1.606-1.258 1.606-1.667V785.5h10.843l.009 1.779zM-1.5 791.5h-11v-6h11v6z"/><path d="M15.805 801.444l-1.602-1.308c0-.237.082-.49.082-.817a2.483 2.483 0 0 0-.082-.817l1.602-1.389a.399.399 0 0 0 .082-.49l-1.528-2.86a.364.364 0 0 0-.278-.123.678.678 0 0 0-.18 0l-1.912.866a6.95 6.95 0 0 0-1.299-.817l-.311-1.989c-.017-.195-.188-.199-.384-.199H6.93c-.147 0-.384.037-.384.199l-.311 2.053c-.458.229-.899.468-1.299.786l-1.912-.834c-.041-.008-.09-.016-.131-.008a.356.356 0 0 0-.319.192l-1.528 2.817c-.082.164-.082.408.082.489l1.749 1.308c0 .237-.082.489-.082.816a2.48 2.48 0 0 0 .082.817l-1.602 1.356a.399.399 0 0 0-.082.49l1.528 2.86a.364.364 0 0 0 .278.123.678.678 0 0 0 .18 0l1.912-.817c.4.318.842.597 1.299.817l.311 2.116a.322.322 0 0 0 .221.4c.033.008.065.017.09.017h3.065c.147 0 .384-.164.384-.327l.311-2.215c.466-.212.907-.49 1.299-.817l1.831.817a.441.441 0 0 0 .54-.163l1.528-2.86c.056-.08-.018-.326-.165-.489zm-7.306.744a2.865 2.865 0 0 1-3.064-2.664c-.114-1.585 1.079-2.95 2.664-3.064a2.867 2.867 0 0 1 3.072 2.868 2.804 2.804 0 0 1-2.672 2.86z"/></g></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><g fill="#555"><path d="M-7.5 779.976V777.5h-7v7h3v-2.752l3.758 4.067 1.74-1.846-4.342-4.003 2.844.01zM-7.742 799.096l-3.758 4.101V800.5h-3v7h7v-2h-2.618l-.049-.371 4.124-4.054-1.699-1.979zM8.746 785.913l3.754-4.092v2.679h3v-7h-7v2h2.602l.082.381-4.126 4.041 1.688 1.991zM13.5 800.5v2.598l-.382.074-4.058-4.003-1.882 1.575 4.006 3.756H8.5v3h7v-7h-2zM-4 786.5h9c1.104 0 2.5.908 2.5 2.011v7.996c0 1.103-1.396 1.993-2.5 1.993h-9c-1.104 0-2.5-.891-2.5-1.993v-8.005c0-1.103 1.396-2.002 2.5-2.002z"/></g></svg>'},WebDataRocksToolbar.prototype.connectLocalCSVHandler=function(){this.pivot.connectTo({dataSourceType:"csv",browseForFile:!0})},WebDataRocksToolbar.prototype.connectLocalJSONHandler=function(){this.pivot.connectTo({dataSourceType:"json",browseForFile:!0})},WebDataRocksToolbar.prototype.connectRemoteCSV=function(){this.showConnectToRemoteCSVDialog()},WebDataRocksToolbar.prototype.connectRemoteJSON=function(){this.showConnectToRemoteJSONDialog()},WebDataRocksToolbar.prototype.openLocalReport=function(){this.pivot.open()},WebDataRocksToolbar.prototype.openRemoteReport=function(){this.showOpenRemoteReportDialog()},WebDataRocksToolbar.prototype.saveHandler=function(){this.pivot.save("report.json","file")},WebDataRocksToolbar.prototype.formatCellsHandler=function(){this.showFormatCellsDialog()},WebDataRocksToolbar.prototype.conditionalFormattingHandler=function(){this.showConditionalFormattingDialog()},WebDataRocksToolbar.prototype.optionsHandler=function(){this.showOptionsDialog()},WebDataRocksToolbar.prototype.fieldsHandler=function(){this.pivot.openFieldsList()},WebDataRocksToolbar.prototype.printHandler=function(){this.pivot.print()},WebDataRocksToolbar.prototype.exportHandler=function(e){e=="pdf"?this.showExportPdfDialog():this.pivot.exportTo(e)},WebDataRocksToolbar.prototype.fullscreenHandler=function(){this.toggleFullscreen()},WebDataRocksToolbar.prototype.defaults={},WebDataRocksToolbar.prototype.showConnectToRemoteCSVDialog=function(){var e=this,n=this.Labels,t=this.popupManager.createPopup();t.content.classList.add("wdr-popup-w500"),t.setTitle(n.open_remote_csv),t.setToolbar([{id:"wdr-btn-open",label:n.open,handler:function(){0<a.value.length&&e.pivot.connectTo({filename:a.value,dataSourceType:"csv"})},isPositive:!0},{id:"wdr-btn-cancel",label:n.cancel}]);var n=document.createElement("div"),a=document.createElement("input");a.id="wdr-inp-file-url",a.type="text",a.value="https://cdn.webdatarocks.com/data/data.csv",n.appendChild(a),t.setContent(n),this.popupManager.addPopup(t.content)},WebDataRocksToolbar.prototype.showConnectToRemoteJSONDialog=function(){var e=this,n=this.Labels,t=this.popupManager.createPopup();t.content.classList.add("wdr-popup-w500"),t.setTitle(n.open_remote_json),t.setToolbar([{id:"wdr-btn-open",label:n.open,handler:function(){0<a.value.length&&e.pivot.connectTo({filename:a.value,dataSourceType:"json"})},isPositive:!0},{id:"wdr-btn-cancel",label:n.cancel}]);var n=document.createElement("div"),a=document.createElement("input");a.id="wdr-inp-file-url",a.type="text",a.value="https://cdn.webdatarocks.com/data/data.json",n.appendChild(a),t.setContent(n),this.popupManager.addPopup(t.content)},WebDataRocksToolbar.prototype.showOpenRemoteReportDialog=function(){var e=this,n=this.Labels,t=this.popupManager.createPopup();t.content.classList.add("wdr-popup-w500"),t.setTitle(n.open_remote_report),t.setToolbar([{id:"wdr-btn-open",label:n.open,handler:function(){0<a.value.length&&e.pivot.load(a.value)},isPositive:!0},{id:"wdr-btn-cancel",label:n.cancel}]);var n=document.createElement("div"),a=document.createElement("input");a.type="text";var c=e.pivot.getOptions()||{};a.value=c.grid&&c.grid.type=="flat"?"https://cdn.webdatarocks.com/reports/report-flat.json":"https://cdn.webdatarocks.com/reports/report.json",n.appendChild(a),t.setContent(n),this.popupManager.addPopup(t.content)},WebDataRocksToolbar.prototype.showFormatCellsDialog=function(){var e=this,t=this.Labels,n=function(){d.disabled=l.disabled=p.disabled=u.disabled=w.disabled=y.disabled=h.disabled=b.disabled=r.value=="empty";var m=e.pivot.getFormat(r.value);d.value=m.textAlign=="left"||m.textAlign=="right"?m.textAlign:"right",l.value=m.thousandsSeparator,p.value=m.decimalSeparator,u.value=m.decimalPlaces,w.value=m.currencySymbol,y.value=m.currencySymbolAlign,h.value=m.nullValue,b.value=m.isPercent==!0},a=this.popupManager.createPopup();a.content.id="wdr-popup-format-cells",a.setTitle(this.osUtils.isMobile?t.format:t.format_cells),a.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var m={};r.value==""&&(m.name=""),m.textAlign=d.value,m.thousandsSeparator=l.value,m.decimalSeparator=p.value,m.decimalPlaces=u.value,m.currencySymbol=w.value,m.currencySymbolAlign=y.value,m.nullValue=h.value,m.isPercent=b.value=="true",e.pivot.setFormat(m,r.value==""?null:r.value),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var c=document.createElement("div"),s=document.createElement("div");s.classList.add("wdr-inp-group"),c.appendChild(s);var o=document.createElement("div");o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o);var i=document.createElement("label");i.classList.add("wdr-uc"),e.setText(i,t.choose_value),o.appendChild(i);var v=e.createSelect(),r=v.select;r.onchange=n,r.options[0]=new Option(t.choose_value,"empty"),r.options[0].disabled=!0,r.options[1]=new Option(t.all_values,""),o.appendChild(v),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),s=document.createElement("div"),s.classList.add("wdr-inp-group"),c.appendChild(s),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.text_align),o.appendChild(i);var v=e.createSelect(),d=v.select;d.options[0]=new Option(t.align_left,"left"),d.options[1]=new Option(t.align_right,"right"),o.appendChild(v),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.thousand_separator),o.appendChild(i);var v=e.createSelect(),l=v.select;l.options[0]=new Option(t.none,""),l.options[1]=new Option(t.space," "),l.options[2]=new Option(",",","),l.options[3]=new Option(".","."),o.appendChild(v),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.decimal_separator),o.appendChild(i);var v=e.createSelect(),p=v.select;p.options[0]=new Option(".","."),p.options[1]=new Option(",",","),o.appendChild(v),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.decimal_places),o.appendChild(i);for(var v=e.createSelect(),u=v.select,i=0;11>i;i++)u.options[i]=new Option(i===0?t.none:i-1,i-1);o.appendChild(v),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.currency_symbol),o.appendChild(i);var w=document.createElement("input");w.classList.add("wdr-inp"),w.type="text",o.appendChild(w),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.currency_align),o.appendChild(i);var v=e.createSelect(),y=v.select;y.options[0]=new Option(t.align_left,"left"),y.options[1]=new Option(t.align_right,"right"),o.appendChild(v),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.null_value),o.appendChild(i);var h=document.createElement("input");h.classList.add("wdr-inp"),h.type="text",o.appendChild(h),o=document.createElement("div"),o.classList.add("wdr-inp-row"),o.classList.add("wdr-ir-horizontal"),s.appendChild(o),i=document.createElement("label"),e.setText(i,t.is_percent),o.appendChild(i);var v=e.createSelect(),b=v.select;for(b.options[0]=new Option(t.true_value,!0),b.options[1]=new Option(t.false_value,!1),o.appendChild(v),a.setContent(c),this.popupManager.addPopup(a.content),t=e.pivot.getMeasures(),i=0;i<t.length;i++)r.options[i+2]=new Option(t[i].caption,t[i].uniqueName);n()},WebDataRocksToolbar.prototype.showConditionalFormattingDialog=function(){var e=this,t=this.Labels,n=this.pivot.getAllConditions(),a=function(i){for(var r=i.match(/\W\d+\.*\d*/g),d=[],l=!1,p="",u=0;u<i.length;u++)i[u]=='"'||i[u]=="'"?(l?d.push(p):p="",l=!l):l&&(p+=i[u]);return i=i.match(/<=|>=|<|>|=|=|!=|isNaN/g),r==null&&d==null?{}:{value1:r!=null?r[0].replace(/\s/,""):d[0],value2:r!=null&&1<r.length?r[1].replace(/\s/,""):"",sign:i?i.join(""):""}},c=this.popupManager.createPopup();c.content.id="wdr-popup-conditional",c.setTitle(this.osUtils.isMobile?t.conditional:t.conditional_formatting),c.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){e.pivot.removeAllConditions();for(var i=0;i<n.length;i++){var r;r=n[i].sign;var d=n[i].value1,l=n[i].value2,p="",u=l==null||l.length==0,w=r==="><",y=r==="isNaN";if((d==null||d.length==0)&&!y||w&&u||(w&&!u?p="AND(#value > "+d+", #value < "+l+")":y?p="isNaN(#value)":(isNaN(parseFloat(d))&&(d="'"+d+"'"),p="#value "+r+" "+d)),r=p,r==null)return;n[i].formula=r,e.pivot.addCondition(n[i])}e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var s=document.createElement("a");s.id="wdr-add-btn",s.setAttribute("href","javascript:void(0)"),s.classList.add("wdr-ui-btn"),s.classList.add("wdr-ui-btn-light"),s.classList.add("wdr-button-add"),s.onclick=function(){var i={sign:"<",value1:"0",measures:e.pivot.getMeasures(),format:{fontFamily:"Arial",fontSize:"12px",color:"#000000",backgroundColor:"#FFFFFF"}};n.push(i),o.appendChild(e.createConditionalFormattingItem(i,n)),e.popupManager.centerPopup(c.content)},s.setAttribute("title",t.add_condition),t=document.createElement("span"),t.classList.add("wdr-icon"),t.classList.add("wdr-icon-act_add"),s.appendChild(t),c.toolbar.insertBefore(s,c.toolbar.firstChild);var o=document.createElement("div");for(o.classList.add("wdr-popup-content"),o.onclick=function(i){i.target.classList.contains("wdr-cr-delete")&&e.popupManager.centerPopup(c.content)},s=0;s<n.length;s++)t=a(n[s].formula),n[s].value1=t.value1,n[s].value2=t.value2,n[s].sign=t.sign,n[s].measures=e.pivot.getMeasures(),o.appendChild(e.createConditionalFormattingItem(n[s],n));c.setContent(o),this.popupManager.addPopup(c.content)},WebDataRocksToolbar.prototype.defaults.fontSizes="8px 9px 10px 11px 12px 13px 14px".split(" "),WebDataRocksToolbar.prototype.defaults.fonts="Arial;Lucida Sans Unicode;Verdana;Courier New;Palatino Linotype;Tahoma;Impact;Trebuchet MS;Georgia;Times New Roman".split(";"),WebDataRocksToolbar.prototype.defaults.conditions=[{label:"less_than",sign:"<"},{label:"less_than_or_equal",sign:"<="},{label:"greater_than",sign:">"},{label:"greater_than_or_equal",sign:">="},{label:"equal_to",sign:"="},{label:"not_equal_to",sign:"!="},{label:"between",sign:"><"},{label:"is_empty",sign:"isNaN"}],WebDataRocksToolbar.prototype.createConditionalFormattingItem=function(e,t){var n=this,a=this.Labels,c=function(f,g){p[0]=new Option(a.all_values,"");for(var E=n.pivot.getOptions()||{},E=E.grid&&E.grid.type=="flat",L=0;L<f.length;L++)E&&f[L].type==7||(p[p.options.length]=new Option(f[L].caption,f[L].uniqueName));g!=null?p.value=g:p.selectedIndex=0},s=function(){"sign"in e&&e.sign==="><"?(w.classList.remove("wdr-width120"),w.classList.add("wdr-width50"),w.style.display="inline-block",h.value="value2"in e?e.value2:"0",h.style.display="inline-block",y.style.display="inline-block"):("sign"in e&&e.sign==="isNaN"?w.style.display="none":(w.classList.add("wdr-width120"),w.classList.remove("wdr-width50"),w.style.display="inline-block"),h.style.display="none",y.style.display="none")},o=function(){var f=e.format;f!=null&&(C.style.backgroundColor=f.backgroundColor||"#fff",C.style.color=f.color||"#000",C.style.fontFamily=f.fontFamily||"Arial",C.style.fontSize=f.fontSize||"12px")},i=document.createElement("div");i.classList.add("wdr-condition-row");var r=document.createElement("div");r.classList.add("wdr-wrap-relative"),i.appendChild(r);var d=document.createElement("span");d.classList.add("wdr-cr-delete"),d.classList.add("wdr-icon"),d.classList.add("wdr-icon-act_trash"),d.onclick=function(){var f=t.indexOf(e);-1<f&&t.splice(f,1),i.parentNode.removeChild(i)},r.appendChild(d),d=document.createElement("div"),d.classList.add("wdr-cr-inner"),r.appendChild(d);var l=document.createElement("div");l.classList.add("wdr-cr-lbl"),l.classList.add("wdr-width50"),n.setText(l,a.value+":"),d.appendChild(l),l=n.createSelect(),l.id="wdr-values";var p=l.select;"measures"in e?(c(e.measures,e.measure),p.disabled=e.measures.length===0):p.disabled=!0,p.onchange=function(){e.measure=p.value},d.appendChild(l),l=n.createSelect(),l.id="wdr-conditions";var u=l.select;(function(f){for(var g=0;g<n.defaults.conditions.length;g++)u[g]=new Option(a[n.defaults.conditions[g].label],n.defaults.conditions[g].sign);f!=null?u.value=f:u.selectedIndex=0})("sign"in e?e.sign:null),u.onchange=function(){e.sign=u.value,"sign"in e&&e.sign==="><"?e.value2=0:("sign"in e&&e.sign==="isNaN"&&delete e.value1,delete e.value2),s()},d.appendChild(l);var w=document.createElement("input");w.classList.add("wdr-number-inp"),w.classList.add("wdr-width50"),w.type="number",w.value="value1"in e?e.value1:"0",w.onchange=function(){e.value1=w.value.length==0?"0":w.value},d.appendChild(w);var y=document.createElement("span");y.id="wdr-and-label",y.classList.add("wdr-width20"),n.setText(y,a.and_symbole),d.appendChild(y);var h=document.createElement("input");h.classList.add("wdr-number-inp"),h.classList.add("wdr-width50"),h.type="number",h.value="value2"in e?e.value2:"0",h.onchange=function(){e.value2=h.value.length==0?"0":h.value},d.appendChild(h),s(),d=document.createElement("div"),d.classList.add("wdr-cr-inner"),r.appendChild(d),l=document.createElement("div"),l.classList.add("wdr-cr-lbl"),l.classList.add("wdr-width50"),n.setText(l,a.format+":"),d.appendChild(l),l=n.createSelect(),l.id="wdr-font-family";var v=l.select;(function(f){for(var g=0;g<n.defaults.fonts.length;g++)v[g]=new Option(n.defaults.fonts[g],n.defaults.fonts[g]);v.value=f??"Arial"})(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontFamily")?e.format.fontFamily:null),v.onchange=function(){e.format!=null&&(e.format.fontFamily=v.value,o())},d.appendChild(l),l=n.createSelect(),l.id="wdr-font-size";var b=l.select;(function(f){for(var g=0;g<n.defaults.fontSizes.length;g++)b[g]=new Option(n.defaults.fontSizes[g],n.defaults.fontSizes[g]);b.value=f??"12px"})(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontSize")?e.format.fontSize:null),b.onchange=function(){e.format!=null&&(e.format.fontSize=b.value,o())},d.appendChild(l);var m=new WebDataRocksToolbar.ColorPicker(this,i);m.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),m.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("color")?e.format.color:"0x000000","font"),m.changeHandler=function(){e.format!=null&&(C.style.color=m.fontColor||"#000",C.style.backgroundColor=m.backgroundColor||"#fff")},m.applyHandler=function(){e.format!=null&&(e.format.color=m.fontColor,e.format.backgroundColor=m.backgroundColor,o())},m.cancelHandler=function(){e.format!=null&&(m.setColor(e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),m.setColor(e.format.hasOwnProperty("color")?e.format.color:"0x000000","font")),o()},d.appendChild(m.element);var C=document.createElement("input");return C.id="wdr-sample",C.classList.add("wdr-inp"),C.type="number",C.value="73.93",C.style.pointerEvents="none",d.appendChild(C),o(),i},WebDataRocksToolbar.prototype.showOptionsDialog=function(){var e=this,t=this.Labels,n=this.popupManager.createPopup();n.content.id="wdr-popup-options",n.setTitle(this.osUtils.isMobile?t.options:t.layout_options),n.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var E;d.checked?E="off":p.checked?E="on":u.checked?E="rows":w.checked&&(E="columns");var L;m.checked?L="off":C.checked?L="on":f.checked?L="rows":g.checked&&(L="columns");var x="compact";v&&v.checked?x="classic":b&&b.checked&&(x="flat");var F=e.pivot.getOptions(),F={grid:{showGrandTotals:E,showTotals:L,type:x}};e.pivot.setOptions(F),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var a=document.createElement("div");a.classList.add("wdr-popup-content");var c=document.createElement("div");c.classList.add("wdr-ui-row"),a.appendChild(c);var s=document.createElement("div");s.classList.add("wdr-ui-col-2"),c.appendChild(s);var h=document.createElement("div");h.classList.add("wdr-title-2"),e.setText(h,t.grand_totals),s.appendChild(h);var o="wdr-grand-totals-"+Date.now(),h=document.createElement("ul");h.classList.add("wdr-radiobtn-list"),s.appendChild(h);var i=document.createElement("li"),r=document.createElement("div");r.classList.add("wdr-radio-wrap");var d=document.createElement("input");d.type="radio",d.name=o,d.id="wdr-gt-1",d.value="off",r.appendChild(d);var l=document.createElement("label");l.setAttribute("for","wdr-gt-1"),e.setText(l,t.grand_totals_off),r.appendChild(l),i.appendChild(r),h.appendChild(i),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var p=document.createElement("input");p.type="radio",p.name=o,p.id="wdr-gt-2",p.value="on",r.appendChild(p),l=document.createElement("label"),l.setAttribute("for","wdr-gt-2"),e.setText(l,t.grand_totals_on),r.appendChild(l),i.appendChild(r),h.appendChild(i),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var u=document.createElement("input");u.type="radio",u.name=o,u.id="wdr-gt-3",u.value="rows",r.appendChild(u),l=document.createElement("label"),l.setAttribute("for","wdr-gt-3"),e.setText(l,t.grand_totals_on_rows),r.appendChild(l),i.appendChild(r),h.appendChild(i),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var w=document.createElement("input");w.type="radio",w.name=o,w.id="wdr-gt-4",w.value="rows",r.appendChild(w),l=document.createElement("label"),l.setAttribute("for","wdr-gt-4"),e.setText(l,t.grand_totals_on_columns),r.appendChild(l),i.appendChild(r),h.appendChild(i),h=document.createElement("div"),h.classList.add("wdr-title-2"),e.setText(h,t.layout),s.appendChild(h);var y="wdr-layout-"+Date.now(),h=document.createElement("ul");h.classList.add("wdr-radiobtn-list"),s.appendChild(h),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap"),o=document.createElement("input"),o.type="radio",o.name=y,o.id="wdr-lt-1",o.value="compact",r.appendChild(o),l=document.createElement("label"),l.setAttribute("for","wdr-lt-1"),e.setText(l,t.compact_view),r.appendChild(l),i.appendChild(r),h.appendChild(i),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var v=document.createElement("input");v.type="radio",v.name=y,v.id="wdr-lt-2",v.value="classic",r.appendChild(v),l=document.createElement("label"),l.setAttribute("for","wdr-lt-2"),e.setText(l,t.classic_view),r.appendChild(l),i.appendChild(r),h.appendChild(i),s=e.pivot.getReport({withDefaults:!0,withGlobals:!0}),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var b=document.createElement("input");b.type="radio",b.name=y,b.id="wdr-lt-3",b.value="flat",r.appendChild(b),l=document.createElement("label"),l.setAttribute("for","wdr-lt-3"),e.setText(l,t.flat_view),r.appendChild(l),i.appendChild(r),h.appendChild(i),s=document.createElement("div"),s.classList.add("wdr-ui-col-2"),c.appendChild(s),h=document.createElement("div"),h.classList.add("wdr-title-2"),e.setText(h,t.subtotals),s.appendChild(h),c="wdr-subtotals-"+Date.now(),h=document.createElement("ul"),h.classList.add("wdr-radiobtn-list"),s.appendChild(h),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var m=document.createElement("input");m.type="radio",m.name=c,m.id="wdr-st-1",m.value="off",r.appendChild(m),l=document.createElement("label"),l.setAttribute("for","wdr-st-1"),e.setText(l,t.subtotals_off),r.appendChild(l),i.appendChild(r),h.appendChild(i),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var C=document.createElement("input");C.type="radio",C.name=c,C.id="wdr-st-2",C.value="on",r.appendChild(C),l=document.createElement("label"),l.setAttribute("for","wdr-st-2"),e.setText(l,t.subtotals_on),r.appendChild(l),i.appendChild(r),h.appendChild(i),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var f=document.createElement("input");f.type="radio",f.name=c,f.id="wdr-st-3",f.value="rows",r.appendChild(f),l=document.createElement("label"),l.setAttribute("for","wdr-st-3"),e.setText(l,t.subtotals_on_rows),r.appendChild(l),i.appendChild(r),h.appendChild(i),i=document.createElement("li"),r=document.createElement("div"),r.classList.add("wdr-radio-wrap");var g=document.createElement("input");g.type="radio",g.name=c,g.id="wdr-st-4",g.value="columns",r.appendChild(g),l=document.createElement("label"),l.setAttribute("for","wdr-st-4"),e.setText(l,t.subtotals_on_columns),r.appendChild(l),i.appendChild(r),h.appendChild(i),n.setContent(a),this.popupManager.addPopup(n.content),s=e.pivot.getOptions()||{},t=s.grid||{},t.showGrandTotals=="off"||t.showGrandTotals==!1?d.checked=!0:t.showGrandTotals=="on"||t.showGrandTotals==!0?p.checked=!0:t.showGrandTotals=="rows"?u.checked=!0:t.showGrandTotals=="columns"&&(w.checked=!0),t.showTotals=="off"?m.checked=!0:t.showTotals=="on"?C.checked=!0:t.showTotals=="rows"?f.checked=!0:t.showTotals=="columns"&&(g.checked=!0),t.type=="flat"&&b?b.checked=!0:t.type=="classic"&&v?v.checked=!0:o&&(o.checked=!0)},WebDataRocksToolbar.prototype.showExportPdfDialog=function(){var e=this,t=this.Labels,n=this.popupManager.createPopup();n.setTitle(t.choose_page_orientation),n.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var r="portrait";i.checked&&(r="landscape"),e.pivot.exportTo("pdf",{pageOrientation:r})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]);var a=document.createElement("div"),c=document.createElement("ul");c.classList.add("wdr-radiobtn-list"),a.appendChild(c);var s=document.createElement("li");c.appendChild(s);var o=document.createElement("div");o.classList.add("wdr-radio-wrap"),s.appendChild(o),s=document.createElement("input"),s.id="wdr-portrait-radio",s.type="radio",s.name="wdr-pdf-orientation",s.checked=!0,o.appendChild(s),s=document.createElement("label"),s.setAttribute("for","wdr-portrait-radio"),e.setText(s,t.portrait),o.appendChild(s),s=document.createElement("li"),c.appendChild(s),o=document.createElement("div"),o.classList.add("wdr-radio-wrap"),s.appendChild(o);var i=document.createElement("input");i.id="wdr-landscape-radio",i.type="radio",i.name="wdr-pdf-orientation",o.appendChild(i),s=document.createElement("label"),s.setAttribute("for","wdr-landscape-radio"),e.setText(s,t.landscape),o.appendChild(s),n.setContent(a),this.popupManager.addPopup(n.content)},WebDataRocksToolbar.prototype.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.enterFullscreen(this.container)},WebDataRocksToolbar.prototype.isFullscreen=function(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},WebDataRocksToolbar.prototype.enterFullscreen=function(e){if(e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen&&window==top){if(this.containerStyle={width:this.container.style.width,height:this.container.style.height,position:this.container.style.position,top:this.container.style.top,bottom:this.container.style.bottom,left:this.container.style.left,right:this.container.style.right,marginTop:this.container.style.marginTop,marginLeft:this.container.style.left,toolbarWidth:this.toolbarWrapper.style.width},this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="fixed",this.container.style.top="0px",this.container.style.left="0px",this.toolbarWrapper.style.width="100%",e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullScreen){var t=navigator.userAgent;-1<t.indexOf("Safari")&&t.indexOf("Chrome")==-1?e.webkitRequestFullScreen():e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&(window==top?e.msRequestFullscreen():alert("Fullscreen mode in IE 11 is not currently supported while Pivot embeded in iframe."));e.addEventListener("fullscreenchange",function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}.bind(this),!1),e.addEventListener("webkitfullscreenchange",function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}.bind(this),!1),e.addEventListener("mozfullscreenchange",function(){window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height||this.exitFullscreen()}.bind(this),!1)}},WebDataRocksToolbar.prototype.exitFullscreen=function(){this.container.style.width=this.containerStyle.width,this.container.style.height=this.containerStyle.height,this.container.style.position=this.containerStyle.position,this.container.style.top=this.containerStyle.top,this.container.style.left=this.containerStyle.left,this.container.style.marginTop=this.containerStyle.marginTop,this.container.style.marginLeft=this.containerStyle.marginLeft,this.toolbarWrapper.style.width=this.containerStyle.toolbarWidth,document.exitFullscreen?document.exitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullScreen?document.webkitExitFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},WebDataRocksToolbar.prototype.nullOrUndefined=function(e){return typeof e>"u"||e===null},WebDataRocksToolbar.prototype.hasClass=function(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},WebDataRocksToolbar.prototype.addClass=function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},WebDataRocksToolbar.prototype.removeClass=function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," "))},WebDataRocksToolbar.prototype.setText=function(e,t){e&&(e.innerText!==void 0&&(e.innerText=t),e.textContent!==void 0&&(e.textContent=t))},WebDataRocksToolbar.prototype.createSelect=function(){var e=document.createElement("div");e.classList.add("wdr-select");var t=document.createElement("select");return e.appendChild(t),e.select=t,e},WebDataRocksToolbar.prototype.createDivider=function(e){return e=document.createElement("li"),e.className="wdr-divider",e},WebDataRocksToolbar.prototype.createTab=function(e){var t=document.createElement("li");t.id=e.id;var n=document.createElement("a");if(e.hasOwnProperty("class_attr")&&n.setAttribute("class",e.class_attr),n.setAttribute("href","javascript:void(0)"),e.icon){var c=document.createElement("div");c.classList.add("wdr-svg-icon"),c.innerHTML=e.icon,n.appendChild(c)}c=document.createElement("span"),this.setText(c,e.title),n.appendChild(c);var a=this,c=typeof e.handler=="function"?e.handler:this[e.handler];return this.nullOrUndefined(c)||(n.onclick=function(s,o){return function(){s.call(a,o)}}(c,e.args)),this.nullOrUndefined(this[e.onShowHandler])||(n.onmouseover=function(s){return function(){s.call(a)}}(this[e.onShowHandler])),t.onmouseover=function(){a.showDropdown(this)},t.onmouseout=function(){a.hideDropdown(this)},t.appendChild(n),e.menu==null||this.osUtils.isMobile&&e.collapse!=!0||t.appendChild(this.createTabMenu(e.menu)),t},WebDataRocksToolbar.prototype.showDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="block",t.getBoundingClientRect().right>this.toolbarWrapper.getBoundingClientRect().right&&(t.style.right=0,this.addClass(e,"wdr-align-rigth")))},WebDataRocksToolbar.prototype.hideDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="none",t.style.right=null,this.removeClass(e,"wdr-align-rigth"))},WebDataRocksToolbar.prototype.createTabMenu=function(e){var t=document.createElement("div");t.className="wdr-dropdown wdr-shadow-container";var n=document.createElement("ul");n.className="wdr-dropdown-content";for(var a=0;a<e.length;a++)this.isDisabled(e[a])||n.appendChild(e[a].divider?this.createMenuDivider():this.createTab(e[a]));return t.appendChild(n),t},WebDataRocksToolbar.prototype.createMenuDivider=function(){var e=document.createElement("li");return e.className="wdr-v-divider",e},WebDataRocksToolbar.prototype.isDisabled=function(e){return this.nullOrUndefined(e)?!0:e.ios===!1&&this.osUtils.isIOS||e.android===!1&&this.osUtils.isAndroid||e.mobile===!1&&this.osUtils.isMobile},WebDataRocksToolbar.prototype.getElementById=function(e,t){var n=function(a,c){for(var s=0;s<a.childNodes.length;s++){var o=a.childNodes[s];if(o.id==c||(o=n(o,c),o!=null))return o}return null};return n(t||this.toolbarWrapper,e)},WebDataRocksToolbar.prototype.osUtils={isIOS:!!(navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.platform.match(/iPhone|iPad|iPod/i)),isMac:/Mac/i.test(navigator.platform),isAndroid:!!navigator.userAgent.match(/Android/i),isBlackBerry:/BlackBerry/i.test(navigator.platform),isMobile:navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.platform.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||/BlackBerry/i.test(navigator.platform)},WebDataRocksToolbar.PopupManager=function(e){this.toolbar=e,this.activePopup=null},WebDataRocksToolbar.PopupManager.prototype.createPopup=function(){return new WebDataRocksToolbar.PopupManager.PopupWindow(this)},WebDataRocksToolbar.PopupManager.prototype.addPopup=function(e){if(e!=null){this.removePopup(),this.modalOverlay=this.createModalOverlay(),this.activePopup=e,this.toolbar.toolbarWrapper.appendChild(e),this.toolbar.toolbarWrapper.appendChild(this.modalOverlay),this.addLayoutClasses(e),this.centerPopup(e);var t=this;e.resizeHandler=function(){e&&(t.addLayoutClasses(e),t.centerPopup(e))},window.addEventListener("resize",e.resizeHandler)}},WebDataRocksToolbar.PopupManager.prototype.addLayoutClasses=function(e){e.classList.remove("wdr-layout-tablet"),e.classList.remove("wdr-layout-mobile"),e.classList.remove("wdr-layout-mobile-small");var t=this.getBoundingRect(this.toolbar.container);768>t.width&&e.classList.add("wdr-layout-tablet"),580>t.width&&e.classList.add("wdr-layout-mobile"),460>t.width&&e.classList.add("wdr-layout-mobile-small")},WebDataRocksToolbar.PopupManager.prototype.centerPopup=function(e){var t=this.getBoundingRect(this.toolbar.container),n=this.getBoundingRect(e),a=this.getBoundingRect(this.toolbar.toolbarWrapper);e.style.zIndex=parseInt(this.modalOverlay.style.zIndex)+1,this.modalOverlay.style.height=t.height+"px",e.style.left=Math.max(0,(a.width-n.width)/2)+"px",e.style.top=Math.max(0,(t.height-n.height)/2)+"px"},WebDataRocksToolbar.PopupManager.prototype.removePopup=function(e){e=e||this.activePopup,this.modalOverlay!=null&&(this.toolbar.toolbarWrapper.removeChild(this.modalOverlay),this.modalOverlay=null),e!=null&&(this.toolbar.toolbarWrapper.removeChild(e),this.activePopup=null,window.removeEventListener("resize",e.resizeHandler))},WebDataRocksToolbar.PopupManager.prototype.getBoundingRect=function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||e.clientWidth,height:t.height||e.clientHeight}},WebDataRocksToolbar.PopupManager.prototype.createModalOverlay=function(){var e=document.createElement("div");e.className="wdr-modal-overlay",e.id="wdr-popUp-modal-overlay";var t=this;return e.addEventListener("click",function(n){t.removePopup(t.activePopup)}),e},WebDataRocksToolbar.PopupManager.PopupWindow=function(e){this.popupManager=e;var t=document.createElement("div");t.className="wdr-panel-content";var n=document.createElement("div");n.className="wdr-title-bar";var a=document.createElement("div");a.className="wdr-title-text";var c=document.createElement("div");c.className="wdr-toolbox",c.style.clear="both",this.content=document.createElement("div"),this.content.className="wdr-popup wdr-panel wdr-toolbar-ui wdr-ui",this.content.appendChild(t),t.appendChild(n),n.appendChild(a),this.setTitle=function(o){WebDataRocksToolbar.prototype.setText(a,o)},this.setContent=function(o){t.insertBefore(o,n.nextSibling)};var s=this;return this.setToolbar=function(o,i){c.innerHTML="";for(var r=o.length-1;0<=r;r--){var d=document.createElement("a");d.setAttribute("href","javascript:void(0)"),d.className="wdr-ui-btn"+(o[r].isPositive?" wdr-ui-btn-dark":""),o[r].id&&(d.id=o[r].id),WebDataRocksToolbar.prototype.setText(d,o[r].label),d.onclick=function(l){return function(){l?.call(),s.popupManager.removePopup()}}(o[r].handler),o[r].disabled===!0?WebDataRocksToolbar.prototype.addClass(d,"wdr-ui-disabled"):WebDataRocksToolbar.prototype.removeClass(d,"wdr-ui-disabled"),o[r].isPositive&&(WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS)?c.appendChild(d):c.insertBefore(d,c.firstChild)}i?(c.classList.add("wdr-ui-col"),n.appendChild(c),n.classList.add("wdr-ui-row"),a.classList.add("wdr-ui-col")):t.appendChild(c)},this.toolbar=c,this.titleBar=n,this.title=a,this},WebDataRocksToolbar.ColorPicker=function(e,t){function n(u){u=u.target.getAttribute("data-c"),p.drawShades(p.colors[u]),p.setColor(u,p.currentType,!0)}function a(u){u=u.target.getAttribute("data-c"),p.setColor(u,p.currentType,!0)}function c(u){p.currentType=u,i.classList.remove("wdr-current"),r.classList.remove("wdr-current"),u=="bg"?(r.classList.add("wdr-current"),p.setColor(p.backgroundColor,u,!1)):(i.classList.add("wdr-current"),p.setColor(p.fontColor,u,!1))}function s(){p.closePopup(),p.cancelHandler&&p.cancelHandler()}this.toolbar=e,this.element=document.createElement("div"),this.element.classList.add("wdr-colorpick-wrap"),this.element.classList.add("wdr-width40"),this.colorPickerButton=document.createElement("div"),this.colorPickerButton.classList.add("wdr-colorpick-btn"),this.element.appendChild(this.colorPickerButton),this.colorPickerIcon=document.createElement("span"),this.colorPickerIcon.classList.add("wdr-icon"),this.colorPickerIcon.classList.add("wdr-icon-act_font"),this.colorPickerButton.appendChild(this.colorPickerIcon),this.popup=document.createElement("div"),this.popup.classList.add("wdr-colorpick-popup"),this.popup.onclick=function(u){u.stopPropagation()},t.appendChild(this.popup);var o=document.createElement("div");o.classList.add("wdr-color-targ-switch"),this.popup.appendChild(o);var i=document.createElement("a");i.classList.add("wdr-cts-item"),i.classList.add("wdr-current"),i.href="javascript:void(0);",i.innerHTML=e.Labels.cp_text,i.onclick=function(){c("font")},o.appendChild(i);var r=document.createElement("a");r.classList.add("wdr-cts-item"),r.innerHTML=e.Labels.cp_highlight,r.href="javascript:void(0);",r.onclick=function(){c("bg")},o.appendChild(r),o=document.createElement("div"),o.classList.add("wdr-cp-sett-row"),this.popup.appendChild(o),this.colorInput=document.createElement("input"),this.colorInput.type="text",this.colorInput.classList.add("wdr-inp"),this.colorInput.classList.add("wdr-width140"),this.colorInput.classList.add("wdr-tac"),this.colorInput.onchange=function(){var u=p.colorInput.value;p.isColor(u)&&p.setColor(u,p.currentType,!0)},o.appendChild(this.colorInput),this.colorPreview=document.createElement("div"),this.colorPreview.classList.add("wdr-cp-curr-color"),this.colorPreview.classList.add("wdr-width140"),o.appendChild(this.colorPreview),this.mainColors=document.createElement("div"),this.mainColors.classList.add("wdr-row-9colors"),this.popup.appendChild(this.mainColors);for(var d in this.colors){o=document.createElement("div"),o.classList.add("wdr-r9c-item"),o.style.backgroundColor=d,o.setAttribute("data-c",d),o.addEventListener("click",n),this.mainColors.appendChild(o);var l=document.createElement("span");l.classList.add("wdr-cp-currentmark"),l.classList.add("wdr-icon"),l.classList.add("wdr-icon-act_check"),o.appendChild(l),l=document.createElement("span"),l.classList.add("wdr-r9c-arrow"),l.style.borderTopColor=d,o.appendChild(l)}for(this.shadeColors=document.createElement("div"),this.shadeColors.classList.add("wdr-row-4colors"),this.popup.appendChild(this.shadeColors),d=0;8>d;d++)o=document.createElement("div"),o.classList.add("wdr-r4c-item"),o.addEventListener("click",a),this.shadeColors.appendChild(o),l=document.createElement("span"),l.classList.add("wdr-cp-currentmark"),l.classList.add("wdr-icon"),l.classList.add("wdr-icon-act_check"),o.appendChild(l);this.drawShades(this.colors["#000000"]),o=document.createElement("div"),o.classList.add("wdr-cp-btns-row"),this.popup.appendChild(o),d=document.createElement("a"),d.innerHTML=e.Labels.apply,d.classList.add("wdr-ui-btn"),d.classList.add("wdr-ui-btn-dark"),d.addEventListener("click",function(){p.closePopup(),p.applyHandler&&p.applyHandler()}),l=document.createElement("a"),l.innerHTML=e.Labels.cancel,l.classList.add("wdr-ui-btn"),l.addEventListener("click",s),WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS?(o.appendChild(l),o.appendChild(d)):(o.appendChild(d),o.appendChild(l)),this.currentType="font",this.colorPickerButton.addEventListener("click",function(u){u.stopPropagation(),p.isOpened()?p.closePopup():p.openPopup()}),document.body.addEventListener("click",function(u){s()});var p=this},WebDataRocksToolbar.ColorPicker.prototype.colors={"#000000":"#000000 #212121 #424242 #616161 #757575 #9E9E9E #BDBDBD #FFFFFF".split(" "),"#F44336":"#D32F2F #E53935 #F44336 #EF5350 #E57373 #EF9A9A #FFCDD2 #FFEBEE".split(" "),"#FF9800":"#F57C00 #FB8C00 #FF9800 #FFA726 #FFB74D #FFCC80 #FFE0B2 #FFF3E0".split(" "),"#FFEB3B":"#FBC02D #FDD835 #FFEB3B #FFEE58 #FFF176 #FFF59D #FFF9C4 #FFFDE7".split(" "),"#8BC34A":"#689F38 #7CB342 #8BC34A #9CCC65 #AED581 #C5E1A5 #DCEDC8 #F1F8E9".split(" "),"#009688":"#00796B #00897B #009688 #26A69A #4DB6AC #80CBC4 #B2DFDB #E0F2F1".split(" "),"#03A9F4":"#0288D1 #039BE5 #03A9F4 #29B6F6 #4FC3F7 #81D4FA #B3E5FC #E1F5FE".split(" "),"#3F51B5":"#303F9F #3949AB #3F51B5 #5C6BC0 #7986CB #9FA8DA #C5CAE9 #E8EAF6".split(" "),"#9C27B0":"#7B1FA2 #8E24AA #9C27B0 #AB47BC #BA68C8 #CE93D8 #E1BEE7 #F3E5F5".split(" ")},WebDataRocksToolbar.ColorPicker.prototype.isOpened=function(){return this.popup.parentElement&&this.popup.parentElement.classList.contains("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.drawShades=function(e){if(e)for(var t=this.shadeColors.children,n=0;n<t.length;n++){var a=t[n];a.setAttribute("data-c",e[n]),a.style.backgroundColor=e[n],a.style.borderRight=e[n]=="#FFFFFF"?"1px solid #d5d5d5":"none",a.style.borderBottom=e[n]=="#FFFFFF"?"1px solid #d5d5d5":"none"}},WebDataRocksToolbar.ColorPicker.prototype.setColor=function(e,t,n){typeof e=="string"&&e.indexOf("0x")==0&&(e="#"+e.substr(2)),t=="bg"?(this.backgroundColor=e,this.colorPickerButton.style.backgroundColor=e):(this.fontColor=e,this.colorPickerIcon.style.color=e),this.colorInput.value=e,this.colorPreview.style.backgroundColor=e,this.drawSelected(),n&&this.changeHandler&&this.changeHandler()},WebDataRocksToolbar.ColorPicker.prototype.drawSelected=function(){var e=this.currentType=="bg"?this.backgroundColor:this.fontColor,t=this.findMain(e);this.drawShades(this.colors[t]);for(var n=this.mainColors.children,a=0;a<n.length;a++)n[a].classList.remove("wdr-current");for((t=this.mainColors.querySelector("[data-c='"+t+"']"))&&t.classList.add("wdr-current"),n=this.shadeColors.children,a=0;a<n.length;a++)n[a].classList.remove("wdr-current");(e=this.shadeColors.querySelector("[data-c='"+e+"']"))&&e.classList.add("wdr-current")},WebDataRocksToolbar.ColorPicker.prototype.findMain=function(e){typeof e=="string"&&e.indexOf("0x")==0&&(e="#"+e.substr(2));for(var t in this.colors)if(0<=this.colors[t].indexOf(e))return t},WebDataRocksToolbar.ColorPicker.prototype.isColor=function(e){return e.match(/^#?[0-9A-Fa-f]{6}$/g)},WebDataRocksToolbar.ColorPicker.prototype.closePopup=function(){this.popup.parentElement&&this.popup.parentElement.classList.remove("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.openPopup=function(){for(var e=this.toolbar.toolbarWrapper.querySelectorAll(".wdr-colorpick-popup"),t=0;t<e.length;t++)e[t].parentElement.classList.remove("wdr-popup-opened");this.popup.parentElement&&(e=this.toolbar.toolbarWrapper.querySelector("#wdr-popup-conditional .wdr-panel-content"),t=this.getWhere(this.colorPickerButton,e),0>this.getWhere(this.colorPickerButton,document.body).top-this.popup.clientHeight?(this.popup.classList.remove("wdr-arrow-down"),this.popup.classList.add("wdr-arrow-up"),this.popup.style.top=this.colorPickerButton.clientHeight+t.top+11+"px",this.popup.style.bottom=""):(this.popup.classList.add("wdr-arrow-down"),this.popup.classList.remove("wdr-arrow-up"),this.popup.style.bottom=e.clientHeight-t.top+5+"px",this.popup.style.top=""),this.popup.style.left=t.left+this.colorPickerButton.clientWidth/2+2+"px",this.popup.parentElement.classList.add("wdr-popup-opened"))},WebDataRocksToolbar.ColorPicker.prototype.getWhere=function(e,t){var n=0,a=0,c=0,s=0;if(e.offsetParent){for(var n=e.offsetLeft,a=e.offsetTop,o=e;(o=o.parentNode)&&o!=t;)c=o.scrollTop?o.scrollTop:0,s=0,n-=s,a-=c;for(;(e=e.offsetParent)&&e!=t;)n+=e.offsetLeft,a+=e.offsetTop}return{top:a+0,left:n+0}};
