import{a as N}from"./chunk-JY2UFUSU.js";import{d as H,f as P}from"./chunk-JMGSQSON.js";import"./chunk-5267M4YT.js";import{b as k,c as z,d as C,f as T,g as V,j as A,m as I,n as q,s as G,u as D}from"./chunk-EUYLE5IP.js";import{l as F,w as L}from"./chunk-RLCM72IK.js";import{Ca as x,Ib as f,Jb as b,Ra as l,Vb as a,Wb as y,Xb as _,ab as M,g as E,ga as h,gb as g,ob as p,qa as m,qb as S,ra as u,tb as w,xb as e,yb as t,zb as s}from"./chunk-27GLVKKX.js";function U(i,c){if(i&1&&(e(0,"label",12)(1,"span",34),a(2),t()()),i&2){let n=b();l(2),_(" ",n.getFieldError("username")," ")}}function j(i,c){i&1&&(m(),s(0,"path",35)(1,"path",36)(2,"path",37))}function B(i,c){i&1&&(m(),s(0,"path",38)(1,"path",39))}function R(i,c){if(i&1&&(e(0,"label",12)(1,"span",34),a(2),t()()),i&2){let n=b();l(2),_(" ",n.getFieldError("password")," ")}}function W(i,c){if(i&1&&(e(0,"div",40),m(),e(1,"svg",41),s(2,"path",42),t(),u(),e(3,"span"),a(4),t()()),i&2){let n=b();l(4),y(n.errorMessage())}}function $(i,c){i&1&&(s(0,"span",43),e(1,"span"),a(2,"Entrando..."),t())}function O(i,c){i&1&&(m(),e(0,"svg",44),s(1,"path",45),t(),u(),e(2,"span"),a(3,"Entrar"),t())}var ne=(()=>{class i{fb=h(G);router=h(P);route=h(H);authService=h(N);loginForm;showPassword=x(!1);errorMessage=x("");returnUrl="";ngOnInit(){this.initializeForm(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboardAuth",this.authService.isAuthenticated()&&this.router.navigate([this.returnUrl])}initializeForm(){this.loginForm=this.fb.group({username:["",[C.required]],password:["",[C.required]],rememberMe:[!1]})}onSubmit(){if(this.loginForm.valid){this.errorMessage.set("");let n={username:this.loginForm.get("username")?.value,password:this.loginForm.get("password")?.value,rememberMe:this.loginForm.get("rememberMe")?.value};this.authService.login(n).subscribe({next:r=>{console.log("Login realizado com sucesso:",r.user),this.router.navigate([this.returnUrl])},error:r=>{this.errorMessage.set(r.message||"Erro ao realizar login. Verifique suas credenciais."),console.error("Erro no login:",r)}})}}loginDemo(){this.errorMessage.set(""),this.authService.generateSampleAuthResponse().subscribe({next:n=>E(this,null,function*(){yield this.authService.handleAuthSuccess(n,this.loginForm.get("rememberMe")?.value),console.log("Login demo realizado:",n.user),this.router.navigate([this.returnUrl])}),error:n=>{this.errorMessage.set("Erro ao realizar login de demonstra\xE7\xE3o"),console.error("Erro no login demo:",n)}})}togglePasswordVisibility(){this.showPassword.set(!this.showPassword())}isFieldInvalid(n){let r=this.loginForm.get(n);return!!(r&&r.invalid&&(r.dirty||r.touched))}getFieldError(n){let r=this.loginForm.get(n);if(r?.errors){if(r.errors.required)return`${n==="username"?"Usu\xE1rio":"Senha"} \xE9 obrigat\xF3rio`;if(r.errors.minlength)return`M\xEDnimo de ${r.errors.minlength.requiredLength} caracteres`}return""}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=M({type:i,selectors:[["app-login"]],decls:56,vars:12,consts:[[1,"min-h-screen","bg-base-200","flex","items-center","justify-center","px-4"],[1,"max-w-md","w-full","space-y-8"],[1,"card","bg-base-100","shadow-xl"],[1,"text-center","mt-6"],[1,"mx-auto","h-16","w-16","bg-primary","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-10","w-10","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"mt-6","text-3xl","font-extrabold","text-base-900"],[1,"mt-2","text-sm","text-base-600"],[1,"card-body"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label"],[1,"label-text","font-medium"],[1,"relative"],["type","text","formControlName","username","placeholder","Digite seu usu\xE1rio",1,"input","input-bordered","w-full","pl-10","focus:pl-10"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","absolute","left-3","top-2.5","text-base-content/40","pointer-events-none","z-10"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],["class","label",4,"ngIf"],["formControlName","password","placeholder","Digite sua senha",1,"input","input-bordered","w-full","pl-10","pr-10","focus:pl-10","focus:pr-10",3,"type"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],["type","button","tabindex","-1",1,"absolute","right-3","top-2.5","text-base-content/40","hover:text-base-content","z-10","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"h-5","w-5","text-gray-400","hover:text-gray-600"],[1,"label","cursor-pointer","justify-start","gap-3"],["type","checkbox","formControlName","rememberMe",1,"checkbox","checkbox-primary"],[1,"label-text"],["class","alert alert-error",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"text-center","space-y-2"],["type","button",1,"link","link-primary","text-sm"],[1,"divider","text-xs"],["type","button",1,"btn","btn-outline","btn-sm","w-full",3,"click"],[1,"text-center","text-xs","text-gray-500"],[1,"mt-1"],[1,"label-text-alt","text-error"],["d","M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7 7 0 0 0-2.79.588l.77.771A6 6 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755q-.247.248-.517.486z"],["d","M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829"],["d","M3.35 5.47q-.27.24-.518.487A13 13 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7 7 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12z"],["d","M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"],["d","M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"],[1,"alert","alert-error"],["fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"]],template:function(r,o){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(),e(5,"svg",5),s(6,"path",6),t()(),u(),e(7,"h2",7),a(8," WebCareManager "),t(),e(9,"p",8),a(10," Fa\xE7a o login em sua conta para acessar o sistema "),t()(),e(11,"div",9)(12,"form",10),f("ngSubmit",function(){return o.onSubmit()}),e(13,"div",11)(14,"label",12)(15,"span",13),a(16,"Usu\xE1rio"),t()(),e(17,"div",14),s(18,"input",15),m(),e(19,"svg",16),s(20,"path",17),t()(),g(21,U,3,1,"label",18),t(),u(),e(22,"div",11)(23,"label",12)(24,"span",13),a(25,"Senha"),t()(),e(26,"div",14),s(27,"input",19),m(),e(28,"svg",16),s(29,"path",20),t(),u(),e(30,"button",21),f("click",function(){return o.togglePasswordVisibility()}),m(),e(31,"svg",22),g(32,j,3,0)(33,B,2,0),t()()(),g(34,R,3,1,"label",18),t(),u(),e(35,"div",11)(36,"label",23),s(37,"input",24),e(38,"span",25),a(39,"Lembrar de mim"),t()()(),g(40,W,5,1,"div",26),e(41,"button",27),g(42,$,3,0)(43,O,4,0),t(),e(44,"div",28)(45,"button",29),a(46," Esqueci minha senha "),t(),e(47,"div",30),a(48,"ou"),t(),e(49,"button",31),f("click",function(){return o.loginDemo()}),a(50," Login Demonstra\xE7\xE3o "),t()()()()(),e(51,"div",32)(52,"p"),a(53,"WebCareManager - Gest\xE3o Integrada de Cuidados Domiciliares"),t(),e(54,"p",33),a(55,"\xA9 2025 - Todos os direitos reservados"),t()()()()),r&2){let d,v;l(12),p("formGroup",o.loginForm),l(6),S("input-error",((d=o.loginForm.get("username"))==null?null:d.invalid)&&((d=o.loginForm.get("username"))==null?null:d.touched)),l(3),p("ngIf",o.isFieldInvalid("username")),l(6),S("input-error",((v=o.loginForm.get("password"))==null?null:v.invalid)&&((v=o.loginForm.get("password"))==null?null:v.touched)),p("type",o.showPassword()?"text":"password"),l(5),w(o.showPassword()?32:33),l(2),p("ngIf",o.isFieldInvalid("password")),l(6),p("ngIf",o.errorMessage()),l(),p("disabled",o.loginForm.invalid||o.authService.isLoading()),l(),w(o.authService.isLoading()?42:43)}},dependencies:[L,F,D,A,z,k,T,V,I,q],encapsulation:2})}return i})();export{ne as LoginComponent};
