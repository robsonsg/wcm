import{a as Ce}from"./chunk-V2O45BX3.js";import{a as de}from"./chunk-5267M4YT.js";import{c as he,f as me,g as pe,h as ue,i as ge,j as fe,l as be,o as xe,p as ve,q as we,r as _e,t as ye}from"./chunk-EUYLE5IP.js";import{k as se,l as le,w as ce}from"./chunk-RLCM72IK.js";import{$b as F,Ca as D,Db as R,I as ee,Ib as v,Jb as u,Oa as ne,Pb as A,Qb as O,Ra as p,Rb as W,Vb as h,Xb as re,Yb as ae,Z as te,a as C,aa as ie,ab as oe,ac as I,b as Z,bc as P,g as y,ga as B,gb as z,oa as b,ob as _,pa as x,pb as Y,q as G,qb as T,xb as a,yb as s,zb as X}from"./chunk-27GLVKKX.js";var S=class{constructor(l=0,e="Network Error"){this.status=l,this.text=e}};var ke=()=>{if(!(typeof localStorage>"u"))return{get:o=>Promise.resolve(localStorage.getItem(o)),set:(o,l)=>Promise.resolve(localStorage.setItem(o,l)),remove:o=>Promise.resolve(localStorage.removeItem(o))}};var w={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:ke()};var L=o=>o?typeof o=="string"?{publicKey:o}:o.toString()==="[object Object]"?o:{}:{};var Ee=(o,l="https://api.emailjs.com")=>{if(!o)return;let e=L(o);w.publicKey=e.publicKey,w.blockHeadless=e.blockHeadless,w.storageProvider=e.storageProvider,w.blockList=e.blockList,w.limitRate=e.limitRate,w.origin=e.origin||l};var H=(i,t,...n)=>y(null,[i,t,...n],function*(o,l,e={}){let r=yield fetch(w.origin+o,{method:"POST",headers:e,body:l}),d=yield r.text(),c=new S(r.status,d);if(r.ok)return c;throw c});var j=(o,l,e)=>{if(!o||typeof o!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!l||typeof l!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"};var Se=o=>{if(o&&o.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"};var U=o=>o.webdriver||!o.languages||o.languages.length===0;var N=()=>new S(451,"Unavailable For Headless Browser");var Me=(o,l)=>{if(!Array.isArray(o))throw"The BlockList list has to be an array";if(typeof l!="string")throw"The BlockList watchVariable has to be a string"};var Ve=o=>!o.list?.length||!o.watchVariable,ze=(o,l)=>o instanceof FormData?o.get(l):o[l],q=(o,l)=>{if(Ve(o))return!1;Me(o.list,o.watchVariable);let e=ze(l,o.watchVariable);return typeof e!="string"?!1:o.list.includes(e)};var K=()=>new S(403,"Forbidden");var Te=(o,l)=>{if(typeof o!="number"||o<0)throw"The LimitRate throttle has to be a positive number";if(l&&typeof l!="string")throw"The LimitRate ID has to be a non-empty string"};var Le=(o,l,e)=>y(null,null,function*(){let i=Number((yield e.get(o))||0);return l-Date.now()+i}),Q=(o,l,e)=>y(null,null,function*(){if(!l.throttle||!e)return!1;Te(l.throttle,l.id);let i=l.id||o;return(yield Le(i,l.throttle,e))>0?!0:(yield e.set(i,Date.now().toString()),!1)});var $=()=>new S(429,"Too Many Requests");var Re=(o,l,e,i)=>y(null,null,function*(){let t=L(i),n=t.publicKey||w.publicKey,r=t.blockHeadless||w.blockHeadless,d=t.storageProvider||w.storageProvider,c=C(C({},w.blockList),t.blockList),m=C(C({},w.limitRate),t.limitRate);return r&&U(navigator)?Promise.reject(N()):(j(n,o,l),Se(e),e&&q(c,e)?Promise.reject(K()):(yield Q(location.pathname,m,d))?Promise.reject($()):H("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:n,service_id:o,template_id:l,template_params:e}),{"Content-type":"application/json"}))});var Fe=o=>{if(!o||o.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"};var Be=o=>typeof o=="string"?document.querySelector(o):o,Ie=(o,l,e,i)=>y(null,null,function*(){let t=L(i),n=t.publicKey||w.publicKey,r=t.blockHeadless||w.blockHeadless,d=w.storageProvider||t.storageProvider,c=C(C({},w.blockList),t.blockList),m=C(C({},w.limitRate),t.limitRate);if(r&&U(navigator))return Promise.reject(N());let g=Be(e);j(n,o,l),Fe(g);let f=new FormData(g);return q(c,f)?Promise.reject(K()):(yield Q(location.pathname,m,d))?Promise.reject($()):(f.append("lib_version","4.4.1"),f.append("service_id",o),f.append("template_id",l),f.append("user_id",n),H("/api/v1.0/email/send-form",f))});var J={init:Ee,send:Re,sendForm:Ie,EmailJSResponseStatus:S};var V=function(o){return o.low="baixa",o.medium="media",o.high="alta",o.critical="critica",o}(V||{}),ri={[V.low]:{color:"#10b981",icon:"\u{1F4A1}",bgColor:"#d1fae5",textColor:"#065f46"},[V.medium]:{color:"#f59e0b",icon:"\u26A0\uFE0F",bgColor:"#fef3c7",textColor:"#92400e"},[V.high]:{color:"#ef4444",icon:"\u{1F6A8}",bgColor:"#fee2e2",textColor:"#991b1b"},[V.critical]:{color:"#dc2626",icon:"\u{1F525}",bgColor:"#fecaca",textColor:"#7f1d1d"}};var Pe=(()=>{class o{http=B(de);config={serviceId:"service_ye8h7qp",templateId:"template_avkyd0f",publicKey:"AE8-s1dpRpxtXUJ94",defaultFrom:"Sistema de Feedback - WebCareManager",defaultReplyTo:"noreply@WebCareManager.com"};maxHtmlSize=50*1024;constructor(){this.initializeEmailJS()}initializeEmailJS(){J.init(this.config.publicKey)}configure(e){this.config=C(C({},this.config),e),this.initializeEmailJS()}sendFeedbackReport(e,i,t="Equipe de Suporte"){let n=this.validateReportData(e,i);if(!n.isValid)throw new Error(`Dados inv\xE1lidos: ${n.errors.join(", ")}`);return G(this.buildEmailParams(e,i,t).then(r=>J.send(this.config.serviceId,this.config.templateId,r))).pipe(te(r=>console.log("Email enviado com sucesso:",r)),ee(r=>{throw console.error("Erro ao enviar email:",r),r}))}testFeedbackReport(e,i,t="Equipe de Suporte"){return y(this,null,function*(){let n=this.validateReportData(e,i);if(!n.isValid)throw new Error(`Dados inv\xE1lidos: ${n.errors.join(", ")}`);return yield this.buildEmailParams(e,i,t)})}buildEmailParams(e,i,t){return y(this,null,function*(){let n=this.generateHtmlContent(e);return new Blob([n]).size>this.maxHtmlSize&&(console.warn("HTML excede 50KB"),yield this.compactHtmlComImagens(n).then(r=>n=r).catch(r=>console.error("Erro ao compactar HTML:",r))),{to_email:i,to_name:t,from_name:this.config.defaultFrom,subject:`[${e.severity.toUpperCase()}] ${e.subject}`,html_content:n,reply_to:this.config.defaultReplyTo,user_name:t,user_email:i,message:e.description}})}compactHtmlComImagens(e){return y(this,null,function*(){let i=/<img[^>]+src="(data:image\/[^;]+;base64,[^"]+)"[^>]*>/g,n=[...e.matchAll(i)].map(E=>({base64:E[1],tag:E[0]})),r=e;n.forEach(E=>{r=r.replace(E.tag,"")});let d=new Blob([r]).size,c=this.maxHtmlSize-d;if(console.log("2-HTML sem imagens:",this.maxHtmlSize,d,c),c<=0)throw new Error("O HTML sem imagens j\xE1 ultrapassa o limite de 50KB");let m=Math.floor(c/n.length),g=[];for(let{base64:E}of n)yield this.reduceImageQuality(E,m).then(M=>{g.push(M)}).catch(M=>console.error("Erro ao reduzir imagem:",M));let f=e;n.forEach((E,M)=>{f=f.replace(E.base64,g[M])});let k=new Blob([f]).size;if(k>this.maxHtmlSize)throw new Error("Mesmo ap\xF3s compress\xE3o, o HTML ainda excede 50KB: "+k);return f})}reduceImageQuality(e,i){return y(this,null,function*(){return new Promise((t,n)=>{let r=[.8,.6,.4,.2,.1],d=c=>{if(c>=r.length){n(new Error("N\xE3o foi poss\xEDvel comprimir a imagem suficientemente"));return}let m=new Image;m.src=e,m.onload=()=>{let g=document.createElement("canvas");g.width=m.width,g.height=m.height;let f=g.getContext("2d");if(!f)return n("Erro ao obter contexto 2D do canvas");f.drawImage(m,0,0);let k=g.toDataURL("image/jpeg",r[c]);this.getBase64Size(k)<=i?t(k):d(c+1)},m.onerror=g=>{console.error("Erro ao carregar imagem:",g),n(g)}};d(0)})})}getBase64Size(e){return new Blob([e]).size}getBase64SizeKB(e){return e.split(",")[1].length*3/4/1024}validateReportData(e,i){let t=[];return(!i||!this.isValidEmail(i))&&t.push("E-mail do destinat\xE1rio inv\xE1lido"),(!e.subject||e.subject.trim().length===0)&&t.push("Assunto \xE9 obrigat\xF3rio"),(!e.description||e.description.trim().length===0)&&t.push("Descri\xE7\xE3o \xE9 obrigat\xF3ria"),Object.keys(V).includes(e.severity)||t.push("N\xEDvel de severidade inv\xE1lido"),{isValid:t.length===0,errors:t}}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}generateHtmlContent(e){let i=this.getSeverityColor(e.severity);return`
      <!DOCTYPE html>
      <html lang="pt-BR">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Relat\xF3rio de Feedback</title>
        <style>
          body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f8fafc; }
          .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); overflow: hidden; }
          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
          .header h1 { margin: 0; font-size: 28px; font-weight: 600; }
          .severity-badge { display: inline-block; padding: 8px 16px; border-radius: 20px; font-weight: 600; margin-top: 15px; }
          .content { padding: 30px; }
          .section { margin-bottom: 25px; padding: 20px; border-radius: 8px; border-left: 4px solid #e2e8f0; background: #f8fafc; }
          .section h3 { margin-top: 0; color: #2d3748; font-size: 18px; display: flex; align-items: center; gap: 8px; }
          .section p, .section li { color: #4a5568; line-height: 1.6; }
          .details-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px; }
          .detail-item { background: white; padding: 15px; border-radius: 6px; border: 1px solid #e2e8f0; }
          .detail-label { font-weight: 600; color: #2d3748; margin-bottom: 5px; }
          .detail-value { color: #4a5568; word-break: break-all; }
          .screenshot-container { text-align: center; margin: 20px 0; }
          .screenshot { max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
          .footer { background: #2d3748; color: white; padding: 20px; text-align: center; }
          .timestamp { background: #edf2f7; padding: 15px; border-radius: 6px; margin-top: 20px; text-align: center; color: #4a5568; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>${this.getSeverityIcon(e.severity)} Relat\xF3rio de Feedback</h1>
            <div class="severity-badge" style="background-color: ${i};">
              Severidade: ${V[e.severity].toUpperCase()}
            </div>
          </div>

          <div class="content">
            <div class="section">
              <h3>\u{1F4CB} Informa\xE7\xF5es Gerais</h3>
              <div class="details-grid">
                <div class="detail-item">
                  <div class="detail-label">Tipo:</div>
                  <div class="detail-value">${e.type||"N\xE3o especificado"}</div>
                </div>
                <div class="detail-item">
                  <div class="detail-label">Assunto:</div>
                  <div class="detail-value">${e.subject}</div>
                </div>
              </div>
            </div>

            <div class="section">
              <h3>\u{1F4DD} Descri\xE7\xE3o</h3>
              <p>${e.description.replace(/\n/g,"<br>")}</p>
            </div>

            ${e.detailsData.finalScreenshot?`
            <div class="section">
              <h3>\u{1F5BC}\uFE0F Screenshot Detalhada</h3>
              <div class="screenshot-container">
                <img src="${e.detailsData.finalScreenshot}" alt="Screenshot detalhada" class="screenshot">
              </div>
            </div>`:""}

            ${e.screenshot?`
            <div class="section">
              <h3>\u{1F4F8} Screenshot Principal</h3>
              <div class="screenshot-container">
                <img src="${e.screenshot}" alt="Screenshot do problema" class="screenshot">
              </div>
            </div>`:""}

            <div class="section">
              <h3>\u{1F527} Detalhes T\xE9cnicos</h3>
              <div class="details-grid">
                <div class="detail-item">
                  <div class="detail-label">URL:</div>
                  <div class="detail-value">${e.detailsData.url}</div>
                </div>
                <div class="detail-item">
                  <div class="detail-label">Resolu\xE7\xE3o da Tela:</div>
                  <div class="detail-value">${e.detailsData.screenResolution}</div>
                </div>
                <div class="detail-item">
                  <div class="detail-label">Navegador:</div>
                  <div class="detail-value">${this.formatBrowserInfo(e.detailsData.browserInfo)}</div>
                </div>
                <div class="detail-item">
                  <div class="detail-label">User Agent:</div>
                  <div class="detail-value">${e.detailsData.userAgent}</div>
                </div>
              </div>
            </div>

            ${e.detailsData.annotations&&e.detailsData.annotations.length>0?`
            <div class="section">
              <h3>\u270F\uFE0F Anota\xE7\xF5es</h3>
              <ul>
                ${e.detailsData.annotations.map(n=>`<li>${JSON.stringify(n)}</li>`).join("")}
              </ul>
            </div>`:""}

            <div class="timestamp">
              <strong>\u{1F4C5} Data e Hora:</strong> ${this.formatTimestamp(e.detailsData.timestamp)}
            </div>
          </div>

          <div class="footer">
            <p>Este relat\xF3rio foi gerado automaticamente pelo Sistema de Feedback Homecare</p>
            <p style="margin: 5px 0 0 0; font-size: 14px; opacity: 0.8;">
              Para responder a este feedback, entre em contato atrav\xE9s dos canais oficiais.
            </p>
          </div>
        </div>
      </body>
      </html>
    `}getSeverityColor(e){return{low:"#10b981",medium:"#f59e0b",high:"#ef4444",critical:"#dc2626"}[e.toLowerCase()]||"#6b7280"}getSeverityIcon(e){return{low:"\u{1F4A1}",medium:"\u26A0\uFE0F",high:"\u{1F6A8}",critical:"\u{1F525}"}[e.toLowerCase()]||"\u{1F4CB}"}formatBrowserInfo(e){return e?`${e.name||"Desconhecido"} ${e.version||""}`:"N\xE3o dispon\xEDvel"}formatTimestamp(e){return new Date(e).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}sendTestEmail(e){let i={type:"Bug Report",severity:"media",subject:"Teste de envio de e-mail",description:"Este \xE9 um e-mail de teste do sistema de feedback.",screenshot:null,detailsData:{finalScreenshot:"",annotations:[],timestamp:new Date().toISOString(),browserInfo:{name:"Chrome",version:"120.0"},screenResolution:"1920x1080",url:window.location.href,userAgent:navigator.userAgent}};return this.sendFeedbackReport(i,e)}sendSimpleEmail(e,i,t){let n={to_email:e,to_name:"Destinat\xE1rio",from_name:"Sistema Homecare",subject:i,message:t,reply_to:"noreply@homecare.com"};return G(J.send(this.config.serviceId,this.config.templateId,n))}static \u0275fac=function(i){return new(i||o)};static \u0275prov=ie({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Oe=["canvas"],We=["screenshotImg"],He=["textInput"],je=["imageWrapper"];function Ue(o,l){if(o&1){let e=R();a(0,"button",59),v("click",function(){let t=b(e).$implicit,n=u(2);return x(n.selectStrokeColor(t))}),s()}if(o&2){let e=l.$implicit,i=u(2);Y("background-color",e),T("ring-2",i.selectedStrokeColor()===e)("ring-primary",i.selectedStrokeColor()===e)}}function Ne(o,l){if(o&1){let e=R();a(0,"div",45)(1,"input",46),v("change",function(){b(e);let t=u();return x(t.setMode("select"))}),s(),a(2,"div",47),h(3,"Ferramentas de Intera\xE7\xE3o com Imagem"),s(),a(4,"div",48)(5,"div",49)(6,"div",50)(7,"div",51)(8,"h4",52),h(9,"\u{1F3A8} Ferramentas"),s(),a(10,"div",53)(11,"button",54),v("click",function(){b(e);let t=u();return x(t.setMode("select"))}),h(12," \u{1F446} Selecionar "),s(),a(13,"button",54),v("click",function(){b(e);let t=u();return x(t.selectTool("rectangle"))}),h(14," \u2B1C Ret\xE2ngulo "),s(),a(15,"button",54),v("click",function(){b(e);let t=u();return x(t.selectTool("circle"))}),h(16," \u2B55 C\xEDrculo "),s(),a(17,"button",54),v("click",function(){b(e);let t=u();return x(t.selectTool("arrow"))}),h(18," \u27A1\uFE0F Seta "),s(),a(19,"button",54),v("click",function(){b(e);let t=u();return x(t.selectTool("text"))}),h(20," \u{1F4DD} Texto "),s()()(),a(21,"div",51)(22,"h4",52),h(23,"\u{1F3A8} Cores R\xE1pidas"),s(),a(24,"div",50),z(25,Ue,1,6,"button",55),s()()(),a(26,"div",56)(27,"span",57),h(28,"Escolha uma das ferramentas acima e desenhe na imagem abaixo"),s(),a(29,"button",58),v("click",function(){b(e);let t=u();return x(t.clearAnnotations())}),h(30,"\u{1F5D1}\uFE0F Limpar Tudo"),s()()()()()}if(o&2){let e=u();p(11),T("btn-active",e.currentMode()==="select"),p(2),T("btn-active",e.selectedTool()==="rectangle"&&e.currentMode()==="draw"),p(2),T("btn-active",e.selectedTool()==="circle"&&e.currentMode()==="draw"),p(2),T("btn-active",e.selectedTool()==="arrow"&&e.currentMode()==="draw"),p(2),T("btn-active",e.selectedTool()==="text"&&e.currentMode()==="draw"),p(6),_("ngForOf",e.availableColors)}}function qe(o,l){if(o&1){let e=R();a(0,"div",78)(1,"label",66),h(2,"Cor do Preenchimento:"),s(),a(3,"input",67),v("change",function(t){b(e);let n=u(3);return x(n.updateElementProperty("fillColor",t))}),s()()}if(o&2){let e=u(3);p(3),_("value",e.selectedElement().fillColor||"#ff0000")}}function Ke(o,l){if(o&1){let e=R();a(0,"div",68)(1,"label",74)(2,"input",75),v("change",function(){b(e);let t=u(2);return x(t.updateElementFill())}),s(),a(3,"span",76),h(4,"Preenchimento"),s()(),z(5,qe,4,1,"div",77),s()}if(o&2){let e=u(2);p(2),_("checked",e.selectedElement().hasFill),p(3),_("ngIf",e.selectedElement().hasFill)}}function Qe(o,l){if(o&1){let e=R();a(0,"div",68)(1,"label",66),h(2,"Texto:"),s(),a(3,"input",79),v("input",function(t){b(e);let n=u(2);return x(n.updateElementText(t))}),s()()}if(o&2){let e=u(2);p(3),_("value",e.selectedElement().text)}}function $e(o,l){if(o&1){let e=R();a(0,"div",60),X(1,"input",61),a(2,"div",62),h(3,"Propriedades do Elemento"),s(),a(4,"div",48)(5,"div",63)(6,"div",64)(7,"div",65)(8,"label",66),h(9,"Cor do Elemento:"),s(),a(10,"input",67),v("change",function(t){b(e);let n=u();return x(n.updateElementProperty("strokeColor",t))}),s()(),a(11,"div",68)(12,"label",66),h(13),s(),a(14,"input",69),v("input",function(t){b(e);let n=u();return x(n.updateElementStrokeWidth(t))}),s()(),a(15,"div",68)(16,"label",66),h(17),s(),a(18,"input",70),v("input",function(t){b(e);let n=u();return x(n.updateElementOpacity(t))}),s()(),z(19,Ke,6,2,"div",71)(20,Qe,4,1,"div",71),a(21,"button",72),v("click",function(){b(e);let t=u();return x(t.deleteSelectedElement())}),a(22,"div",73),h(23,"\u274C"),s(),h(24," Excluir Elemento "),s()()()()()}if(o&2){let e=u();p(10),_("value",e.selectedElement().strokeColor),p(3),ae("",e.selectedElement().type==="text"?"Tamanho":"Largura",": ",e.selectedElement().strokeWidth,"px"),p(),_("value",e.selectedElement().strokeWidth),p(3),re("Opacidade: ",(e.selectedElement().opacity*100).toFixed(0),"%"),p(),_("value",e.selectedElement().opacity*100),p(),_("ngIf",e.selectedElement().type!=="arrow"&&e.selectedElement().type!=="text"),p(),_("ngIf",e.selectedElement().type==="text")}}function Je(o,l){if(o&1){let e=R();a(0,"input",85,3),P("ngModelChange",function(t){b(e);let n=u(2);return I(n.currentText,t)||(n.currentText=t),x(t)}),v("keyup.enter",function(){b(e);let t=u(2);return x(t.confirmText())})("blur",function(){b(e);let t=u(2);return x(t.confirmText())}),s()}if(o&2){let e=u(2);Y("left",e.textInputPosition().x,"px")("top",e.textInputPosition().y,"px")("width","200px"),F("ngModel",e.currentText)}}function Ge(o,l){if(o&1){let e=R();a(0,"div",80)(1,"div",81,0)(3,"img",82,1),v("load",function(){b(e);let t=u();return x(t.onImageLoad())}),s(),a(5,"canvas",83,2),v("mousedown",function(t){b(e);let n=u();return x(n.onCanvasMouseDown(t))})("mousemove",function(t){b(e);let n=u();return x(n.onCanvasMouseMove(t))})("mouseup",function(t){b(e);let n=u();return x(n.onCanvasMouseUp(t))})("click",function(t){b(e);let n=u();return x(n.onCanvasClick(t))}),s(),z(7,Je,2,7,"input",84),s()()}if(o&2){let e=u();p(3),_("src",e.screenshotDataUrl,ne),p(2),T("cursor-crosshair",e.currentMode()==="draw")("cursor-pointer",e.currentMode()==="select"),_("width",e.canvasSize.width)("height",e.canvasSize.height),p(2),_("ngIf",e.showTextInput())}}function Ye(o,l){o&1&&(a(0,"span"),h(1,"Enviar Reporte"),s())}function Xe(o,l){o&1&&X(0,"span",86)}var Mi=(()=>{class o{canvasRef;screenshotImgRef;textInputRef;imageWrapperRef;screenshotDataUrl=null;onConfirm;onCancel;closeModal;toastService=B(Ce);selectedTool=D("rectangle");selectedStrokeColor=D("#ff0000");showTextInput=D(!1);textInputPosition=D({x:0,y:0});canvasSize={width:0,height:0};isSubmitting=!1;emailService=B(Pe);isLoading=!1;statusMessage="";statusType="info";currentMode=D("draw");selectedElement=D(null);ctx;isDrawing=!1;isDragging=!1;isResizing=!1;startX=0;startY=0;dragStartX=0;dragStartY=0;annotations=[];currentAnnotation=null;resizeHandle=null;selectedFillColor=D("#ef444450");availableColors=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ff8800","#8800ff"];severity="low";feedbackReport={type:"",severity:this.severity,subject:"",description:"",screenshot:this.screenshotDataUrl};currentText="";strokeWidth=3;opacity=1;fillEnabled=!1;ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.canvasRef&&(this.ctx=this.canvasRef.nativeElement.getContext("2d"))},100)}onImageLoad(){if(this.screenshotImgRef&&this.canvasRef){let e=this.screenshotImgRef.nativeElement,i=this.canvasRef.nativeElement;setTimeout(()=>{this.canvasSize={width:e.clientWidth,height:e.clientHeight},i.width=e.clientWidth,i.height=e.clientHeight,this.ctx=i.getContext("2d"),this.redrawCanvas()},50)}}setMode(e){this.currentMode.set(e),e==="select"?this.showTextInput.set(!1):this.selectedElement.set(null),this.redrawCanvas()}selectTool(e){this.selectedTool.set(e),this.currentMode.set("draw"),this.selectedElement.set(null),this.showTextInput.set(!1),this.redrawCanvas()}selectStrokeColor(e){this.selectedStrokeColor.set(e),this.selectedElement()&&this.updateElementProperty("strokeColor",{target:{value:e}})}onCanvasMouseDown(e){let i=this.canvasRef.nativeElement.getBoundingClientRect(),t=e.clientX-i.left,n=e.clientY-i.top;this.currentMode()==="select"?this.handleSelectMouseDown(t,n):this.handleDrawMouseDown(t,n)}onCanvasMouseMove(e){let i=this.canvasRef.nativeElement.getBoundingClientRect(),t=e.clientX-i.left,n=e.clientY-i.top;this.currentMode()==="select"?this.handleSelectMouseMove(t,n):this.handleDrawMouseMove(t,n)}onCanvasMouseUp(e){this.currentMode()==="select"?this.handleSelectMouseUp():this.handleDrawMouseUp()}onCanvasClick(e){this.selectedTool()==="text"&&this.currentMode()==="draw"&&this.addText(e)}handleSelectMouseDown(e,i){if(this.selectedElement()){let n=this.getResizeHandle(e,i,this.selectedElement());if(n){this.isResizing=!0,this.resizeHandle=n,this.startX=e,this.startY=i;return}}let t=this.getElementAt(e,i);t?(this.selectedElement.set(t),this.isDragging=!0,this.dragStartX=e-t.x,this.dragStartY=i-t.y):this.selectedElement.set(null),this.redrawCanvas()}handleSelectMouseMove(e,i){if(this.isResizing&&this.selectedElement()&&this.resizeHandle)this.resizeElement(e,i);else if(this.isDragging&&this.selectedElement()){let t=this.selectedElement();if(t.x=e-this.dragStartX,t.y=i-this.dragStartY,t.type==="arrow"&&t.endX!==void 0&&t.endY!==void 0){let n=e-this.dragStartX-t.x,r=i-this.dragStartY-t.y;t.endX+=n,t.endY+=r}this.redrawCanvas()}}handleSelectMouseUp(){this.isDragging=!1,this.isResizing=!1,this.resizeHandle=null}handleDrawMouseDown(e,i){this.selectedTool()!=="text"&&(this.startX=e,this.startY=i,this.isDrawing=!0,this.currentAnnotation={type:this.selectedTool(),x:this.startX,y:this.startY,strokeColor:this.selectedStrokeColor(),fillColor:this.selectedStrokeColor(),strokeWidth:3,opacity:1,hasFill:!1,id:Date.now().toString(),filled:!1})}handleDrawMouseMove(e,i){!this.isDrawing||!this.currentAnnotation||!this.ctx||(this.ctx.clearRect(0,0,this.canvasSize.width,this.canvasSize.height),this.redrawAnnotations(),this.drawElement(this.currentAnnotation,this.startX,this.startY,e,i,!0))}handleDrawMouseUp(){!this.isDrawing||!this.currentAnnotation||(this.isDrawing=!1,this.annotations.push(this.currentAnnotation),this.currentAnnotation=null)}drawElement(e,i,t,n,r,d=!1){this.ctx.globalAlpha=e.opacity,this.ctx.strokeStyle=e.strokeColor,this.ctx.lineWidth=e.strokeWidth,this.ctx.setLineDash([]);let c=i??e.x,m=t??e.y;switch(e.type){case"rectangle":let g=d?n-i:e.width,f=d?r-t:e.height;e.hasFill&&e.fillColor&&(this.ctx.fillStyle=e.fillColor,this.ctx.fillRect(c,m,g,f)),this.ctx.strokeRect(c,m,g,f),d&&(e.width=g,e.height=f);break;case"circle":let k=d?Math.sqrt(Math.pow(n-i,2)+Math.pow(r-t,2)):e.width/2;this.ctx.beginPath(),this.ctx.arc(c,m,k,0,2*Math.PI),e.hasFill&&e.fillColor&&(this.ctx.fillStyle=e.fillColor,this.ctx.fill()),this.ctx.stroke(),d&&(e.width=k*2,e.height=k*2);break;case"arrow":let E=d?n:e.endX,M=d?r:e.endY;this.drawArrow(c,m,E,M),d&&(e.endX=E,e.endY=M);break;case"text":this.ctx.fillStyle=e.strokeColor,this.ctx.font=`${e.strokeWidth*6}px Arial`,this.ctx.fillText(e.text,c,m);break}this.ctx.globalAlpha=1}drawArrow(e,i,t,n){let d=Math.atan2(n-i,t-e);this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(t,n),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t,n),this.ctx.lineTo(t-15*Math.cos(d-Math.PI/6),n-15*Math.sin(d-Math.PI/6)),this.ctx.moveTo(t,n),this.ctx.lineTo(t-15*Math.cos(d+Math.PI/6),n-15*Math.sin(d+Math.PI/6)),this.ctx.stroke()}redrawCanvas(){this.ctx&&(this.ctx.clearRect(0,0,this.canvasSize.width,this.canvasSize.height),this.redrawAnnotations(),this.selectedElement()&&this.currentMode()==="select"&&this.drawSelectionHandles(this.selectedElement()))}redrawAnnotations(){this.annotations.forEach(e=>{this.drawElement(e)})}drawSelectionHandles(e){let i=this.getSelectionHandles(e);this.ctx.fillStyle="#1890ff",this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2,Object.values(i).forEach(t=>{this.ctx.fillRect(t.x-4,t.y-4,8,8),this.ctx.strokeRect(t.x-4,t.y-4,8,8)})}updateSelectedElement(){let e=this.selectedElement();e&&(e.strokeColor=this.selectedStrokeColor(),e.fillColor=this.fillEnabled?this.selectedFillColor():void 0,e.filled=this.fillEnabled,e.opacity=this.opacity,e.strokeWidth=this.strokeWidth,this.redrawAnnotations())}getSelectionHandles(e){let i=this.getElementBounds(e);return{topLeft:{x:i.x,y:i.y},topRight:{x:i.x+i.width,y:i.y},bottomLeft:{x:i.x,y:i.y+i.height},bottomRight:{x:i.x+i.width,y:i.y+i.height},center:{x:i.x+i.width/2,y:i.y+i.height/2}}}getElementBounds(e){switch(e.type){case"rectangle":return{x:Math.min(e.x,e.x+e.width),y:Math.min(e.y,e.y+e.height),width:Math.abs(e.width),height:Math.abs(e.height)};case"circle":let i=e.width/2;return{x:e.x-i,y:e.y-i,width:e.width,height:e.height};case"arrow":return{x:Math.min(e.x,e.endX),y:Math.min(e.y,e.endY),width:Math.abs(e.endX-e.x),height:Math.abs(e.endY-e.y)};case"text":return{x:e.x,y:e.y-20,width:(e.text?.length||0)*12,height:24};default:return{x:0,y:0,width:0,height:0}}}getElementAt(e,i){for(let t=this.annotations.length-1;t>=0;t--){let n=this.annotations[t];if(this.isPointInElement(e,i,n))return n}return null}isPointInElement(e,i,t){switch(t.type){case"rectangle":return e>=t.x&&e<=t.x+t.width&&i>=t.y&&i<=t.y+t.height;case"circle":let n=t.width/2;return(e-t.x)*(e-t.x)+(i-t.y)*(i-t.y)<=n*n;case"arrow":return this.isPointInArrow(e,i,t);case"text":return e>=t.x&&e<=t.x+(t.text?.length||0)*12&&i>=t.y-20&&i<=t.y;default:return!1}}isPointInArrow(e,i,t){let r=t.x,d=t.y,c=t.endX,m=t.endY,g=m-d,f=r-c,k=c*d-r*m;if(Math.abs(g*e+f*i+k)/Math.sqrt(g*g+f*f)<=10){let M=(e-r)*(c-r)+(i-d)*(m-d),De=(c-r)*(c-r)+(m-d)*(m-d);return M>=0&&M<=De}return!1}getResizeHandle(e,i,t){let n=this.getSelectionHandles(t),r=8;for(let[d,c]of Object.entries(n))if(e>=c.x-r/2&&e<=c.x+r/2&&i>=c.y-r/2&&i<=c.y+r/2)return d;return null}resizeElement(e,i){let t=this.selectedElement(),n=e-this.startX,r=i-this.startY;switch(this.resizeHandle){case"topLeft":this.resizeFromTopLeft(t,n,r);break;case"topRight":this.resizeFromTopRight(t,n,r);break;case"bottomLeft":this.resizeFromBottomLeft(t,n,r);break;case"bottomRight":this.resizeFromBottomRight(t,n,r);break}this.redrawCanvas()}resizeFromTopLeft(e,i,t){switch(e.type){case"rectangle":e.x+=i,e.y+=t,e.width=Math.max(10,e.width-i),e.height=Math.max(10,e.height-t);break;case"circle":let n=Math.max(5,e.width/2-Math.max(i,t));e.width=n*2,e.height=n*2;break}this.startX+=i,this.startY+=t}resizeFromTopRight(e,i,t){switch(e.type){case"rectangle":e.y+=t,e.width=Math.max(10,e.width+i),e.height=Math.max(10,e.height-t);break;case"circle":let n=Math.max(5,e.width/2+Math.max(i,-t));e.width=n*2,e.height=n*2;break}this.startX+=i,this.startY+=t}resizeFromBottomLeft(e,i,t){switch(e.type){case"rectangle":e.x+=i,e.width=Math.max(10,e.width-i),e.height=Math.max(10,e.height+t);break;case"circle":let n=Math.max(5,e.width/2+Math.max(-i,t));e.width=n*2,e.height=n*2;break}this.startX+=i,this.startY+=t}resizeFromBottomRight(e,i,t){switch(e.type){case"rectangle":e.width=Math.max(10,e.width+i),e.height=Math.max(10,e.height+t);break;case"circle":let n=Math.max(5,e.width/2+Math.max(i,t));e.width=n*2,e.height=n*2;break}this.startX+=i,this.startY+=t}addText(e){let i=this.canvasRef.nativeElement.getBoundingClientRect(),t=e.clientX-i.left,n=e.clientY-i.top;this.textInputPosition.set({x:t,y:n}),this.showTextInput.set(!0),this.currentText="",setTimeout(()=>{this.textInputRef&&this.textInputRef.nativeElement.focus()},100)}confirmText(){if(this.currentText.trim()){let e={type:"text",x:this.textInputPosition().x,y:this.textInputPosition().y,text:this.currentText.trim(),strokeColor:this.selectedStrokeColor(),strokeWidth:3,opacity:1,hasFill:!1,id:Date.now().toString(),filled:!1};this.annotations.push(e),this.redrawCanvas()}this.showTextInput.set(!1),this.currentText=""}clearAnnotations(){this.annotations=[],this.selectedElement.set(null),this.redrawCanvas()}deleteSelectedElement(){let e=this.selectedElement();if(e){let i=this.annotations.findIndex(t=>t.id===e.id);i!==-1&&(this.annotations.splice(i,1),this.selectedElement.set(null),this.redrawCanvas())}}updateElementProperty(e,i){let t=this.selectedElement();t&&(t[e]=i.target.value,this.redrawCanvas())}updateElementStrokeWidth(e){let i=e.target,t=Number(i.value),n=this.selectedElement();n&&(n.strokeWidth=t,this.redrawCanvas())}updateElementOpacity(e){let i=e.target,t=Number(i.value),n=this.selectedElement();n&&(n.opacity=t/100,this.redrawCanvas())}updateElementFill(){let e=this.selectedElement();e&&(e.hasFill=!e.hasFill,e.hasFill&&!e.fillColor&&(e.fillColor=e.strokeColor),this.redrawCanvas())}updateElementText(e){let i=this.selectedElement();i&&i.type==="text"&&(i.text=e.target.value,this.redrawCanvas())}generateFinalScreenshot(){return y(this,null,function*(){try{let e=document.createElement("canvas"),i=e.getContext("2d");e.width=this.canvasSize.width,e.height=this.canvasSize.height;let t=this.screenshotImgRef.nativeElement;return i.drawImage(t,0,0,e.width,e.height),this.annotations.forEach(n=>{this.drawElementOnContext(i,n)}),e.toDataURL("image/png")}catch(e){return console.error("Erro ao gerar screenshot final:",e),this.screenshotDataUrl||""}})}drawElementOnContext(e,i){switch(e.globalAlpha=i.opacity,e.strokeStyle=i.strokeColor,e.lineWidth=i.strokeWidth,e.setLineDash([]),i.type){case"rectangle":i.hasFill&&i.fillColor&&(e.fillStyle=i.fillColor,e.fillRect(i.x,i.y,i.width,i.height)),e.strokeRect(i.x,i.y,i.width,i.height);break;case"circle":let t=i.width/2;e.beginPath(),e.arc(i.x,i.y,t,0,2*Math.PI),i.hasFill&&i.fillColor&&(e.fillStyle=i.fillColor,e.fill()),e.stroke();break;case"arrow":this.drawArrowOnContext(e,i.x,i.y,i.endX,i.endY);break;case"text":e.fillStyle=i.strokeColor,e.font=`${i.strokeWidth*6}px Arial`,e.fillText(i.text,i.x,i.y);break}e.globalAlpha=1}drawArrowOnContext(e,i,t,n,r){let c=Math.atan2(r-t,n-i);e.beginPath(),e.moveTo(i,t),e.lineTo(n,r),e.stroke(),e.beginPath(),e.moveTo(n,r),e.lineTo(n-15*Math.cos(c-Math.PI/6),r-15*Math.sin(c-Math.PI/6)),e.moveTo(n,r),e.lineTo(n-15*Math.cos(c+Math.PI/6),r-15*Math.sin(c+Math.PI/6)),e.stroke()}submitFeedbackReport(){return y(this,null,function*(){if(!this.feedbackReport.type||!this.feedbackReport.description||!this.feedbackReport.description){this.toastService.warning("Por favor, preencha todos os campos",{title:"Aviso",showTime:!1,duration:4e3});return}this.isSubmitting=!0;try{let e=this.annotations.length>0?yield this.generateFinalScreenshot():"",i=Z(C({},this.feedbackReport),{screenshot:this.screenshotDataUrl,detailsData:{finalScreenshot:e,annotations:this.annotations,timestamp:new Date().toISOString(),browserInfo:this.getBrowserInfo(),screenResolution:this.getScreenResolution(),url:window.location.href,userAgent:navigator.userAgent}});console.log("Reporte de Bug:",i);let t="robsonsg@terra.com.br",n="Recipiente Robson Santos Gomes";this.isLoading=!0,this.statusMessage="Enviando e-mail de teste...",this.statusType="info",this.emailService.sendFeedbackReport(i,t,n).subscribe({next:r=>{this.isLoading=!1,this.statusMessage="E-mail enviado com sucesso!",this.statusType="success",console.log("Email enviado:",r),this.toastService.success("Feedback enviado com sucesso!",{title:"Sucesso",showTime:!1,duration:4e3})},error:r=>{this.isLoading=!1,this.statusMessage="Erro ao enviar relat\xF3rio: "+r.message,this.statusType="error",console.error("Erro no envio:",r),this.toastService.error("Erro ao enviar o reporte. Tente novamente",{title:"Aviso",showTime:!1,duration:4e3})}})}catch(e){console.error("Erro ao enviar reporte:",e),this.toastService.error("Erro ao enviar o reporte. Tente novamente",{title:"Aviso",showTime:!1,duration:4e3})}finally{this.isSubmitting=!1}})}reduceImageQuality(e,i){return y(this,null,function*(){return new Promise((t,n)=>{let r=[.8,.6,.4,.2,.1],d=c=>{if(c>=r.length){n(new Error("N\xE3o foi poss\xEDvel comprimir a imagem suficientemente"));return}let m=new Image;m.src=e,m.onload=()=>{let g=document.createElement("canvas");g.width=m.width,g.height=m.height;let f=g.getContext("2d");if(!f)return n("Erro ao obter contexto 2D do canvas");f.drawImage(m,0,0);let k=g.toDataURL("image/jpeg",r[c]);this.getBase64SizeKB(k)<=i?t(k):d(c+1)},m.onerror=g=>n(g)};d(0)})})}getBase64SizeKB(e){return e.split(",")[1].length*3/4/1024}compressWithQuality(e,i){return new Promise((t,n)=>{let r=[.8,.6,.4,.2,.1],d=c=>{if(c>=r.length){n(new Error("N\xE3o foi poss\xEDvel comprimir a imagem suficientemente"));return}let m=e.toDataURL("image/jpeg",r[c]);this.getBase64SizeKB(m)<=i?t(m):d(c+1)};d(0)})}resetForm(){this.feedbackReport={type:"",severity:this.severity,subject:"",description:"",screenshot:null},this.screenshotDataUrl=null,this.annotations=[],this.selectedElement.set(null),this.currentMode.set("draw"),this.showTextInput.set(!1)}handleCancel(){this.onCancel&&this.onCancel(),console.log("this.closeModal:",this.closeModal),this.closeModal&&this.closeModal()}getBrowserInfo(){let e=navigator.userAgent;return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Desconhecido"}getScreenResolution(){return`${screen.width}x${screen.height}`}getCurrentDateTime(){return new Date().toLocaleString("pt-BR")}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=oe({type:o,selectors:[["app-feedback"]],viewQuery:function(i,t){if(i&1&&(A(Oe,5),A(We,5),A(He,5),A(je,5)),i&2){let n;O(n=W())&&(t.canvasRef=n.first),O(n=W())&&(t.screenshotImgRef=n.first),O(n=W())&&(t.textInputRef=n.first),O(n=W())&&(t.imageWrapperRef=n.first)}},inputs:{screenshotDataUrl:"screenshotDataUrl",onConfirm:"onConfirm",onCancel:"onCancel"},decls:67,vars:14,consts:[["imageWrapper",""],["screenshotImg",""],["canvas",""],["textInput",""],[1,"feedback-report-container"],["tabindex","0","class","collapse collapse-arrow bg-base-200 rounded-box",4,"ngIf"],["class","collapse collapse-arrow rounded-box properties-panel right-4 shadow-xl absolute z-50 top-20 w-80 bg-base-100",4,"ngIf"],["class","screenshot-container bg-base-100 border border-base-300 rounded-box",4,"ngIf"],[1,"mt-4","space-y-4"],[1,"form-group","flex","gap-4"],[1,"flex-shrink-0","flex","flex-col"],[1,"label"],[1,"label-text","font-semibold","text-base-content"],["name","type",1,"select","select-bordered","w-48",3,"ngModelChange","ngModel"],["value",""],["value","BUG"],["value","MELHORIA"],["value","AJUSTES"],["value","CORRECAO"],["value","INTERFACE"],["value","FUNCIONALIDADE"],["value","PERFORMANCE"],["value","DADOS"],["value","OUTROS"],[1,"flex-1"],["name","subject","placeholder","Resumo do assunto","required","",1,"input","input-bordered","w-full",3,"ngModelChange","ngModel"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-base-content","mb-2"],[1,"flex","justify-between"],[1,"flex","items-center"],["type","radio","name","severity","value","low",1,"radio","radio-success","mr-2",3,"ngModelChange","ngModel"],[1,"text-success"],["type","radio","name","severity","value","medium",1,"radio","radio-warning","mr-2",3,"ngModelChange","ngModel"],[1,"text-warning"],["type","radio","name","severity","value","high",1,"radio","radio-accent","mr-2",3,"ngModelChange","ngModel"],[1,"text-accent"],["type","radio","name","severity","value","critical",1,"radio","radio-error","mr-2",3,"ngModelChange","ngModel"],[1,"text-error"],[1,"form-group"],["name","description","rows","4","placeholder","Descreva detalhadamente o motivo do contato","required","",1,"textarea","textarea-bordered","w-full",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn","btn-outline","btn-secondary","mr-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngIf"],["class","loading loading-spinner loading-sm",4,"ngIf"],["tabindex","0",1,"collapse","collapse-arrow","bg-base-200","rounded-box"],["type","checkbox",3,"change"],[1,"collapse-title","font-semibold"],[1,"collapse-content","p-1"],[1,"tools-panel","flex","flex-col","gap-y-2","p-2","bg-base-200","rounded-xl","shadow-md"],[1,"flex","flex-wrap","gap-2"],[1,"tool-section","w-full","md:w-auto"],[1,"text-lg","font-bold","mb-2","text-base-content"],[1,"join","join-horizontal","bg-base-100"],[1,"btn","btn-sm",3,"click"],["class","w-6 h-6 rounded-full border-2 border-base-content/30 hover:border-base-content",3,"background-color","ring-2","ring-primary","click",4,"ngFor","ngForOf"],[1,"flex","justify-between","w-full"],[1,"text-base-content/80"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"w-6","h-6","rounded-full","border-2","border-base-content/30","hover:border-base-content",3,"click"],[1,"collapse","collapse-arrow","rounded-box","properties-panel","right-4","shadow-xl","absolute","z-50","top-20","w-80","bg-base-100"],["type","checkbox","checked","checked"],[1,"collapse-title","font-semibold","text-base-content"],[1,"card","bg-base-100","shadow-lg","border","border-base-300"],[1,"card-body","p-4","space-y-4"],[1,"property-group","flex","flex-row","gap-4"],[1,"label","text-sm","font-medium","text-base-content"],["type","color",1,"input","input-sm","w-16","h-8","p-0","border-0","rounded","bg-base-100",3,"change","value"],[1,"property-group"],["type","range","min","1","max","10",1,"range","range-sm","w-full","range-primary",3,"input","value"],["type","range","min","10","max","100",1,"range","range-sm","w-full","range-primary",3,"input","value"],["class","property-group",4,"ngIf"],[1,"btn","btn-sm","btn-error","w-full","flex","items-center","justify-center","gap-2",3,"click"],[1,"p-1","rounded","bg-current","text-white"],[1,"label","cursor-pointer","justify-start","gap-2"],["type","checkbox",1,"checkbox","checkbox-sm","checkbox-primary",3,"change","checked"],[1,"label-text","ml-1","text-base-content"],["class","mt-2",4,"ngIf"],[1,"mt-2"],["type","text","placeholder","Digite o texto",1,"input","input-sm","w-full","input-bordered",3,"input","value"],[1,"screenshot-container","bg-base-100","border","border-base-300","rounded-box"],[1,"image-canvas-wrapper"],["alt","Screenshot",1,"screenshot-image",3,"load","src"],[1,"drawing-canvas",3,"mousedown","mousemove","mouseup","click","width","height"],["type","text","class","text-input-overlay input input-sm absolute bg-base-100 border-2 border-primary w-80 text-base-content","placeholder","Digite o texto...",3,"left","top","width","ngModel","ngModelChange","keyup.enter","blur",4,"ngIf"],["type","text","placeholder","Digite o texto...",1,"text-input-overlay","input","input-sm","absolute","bg-base-100","border-2","border-primary","w-80","text-base-content",3,"ngModelChange","keyup.enter","blur","ngModel"],[1,"loading","loading-spinner","loading-sm"]],template:function(i,t){i&1&&(a(0,"div",4),z(1,Ne,31,11,"div",5)(2,$e,25,8,"div",6)(3,Ge,8,8,"div",7),a(4,"form",8)(5,"div",9)(6,"div",10)(7,"label",11)(8,"span",12),h(9,"Tipo de Feedback"),s()(),a(10,"select",13),P("ngModelChange",function(r){return I(t.feedbackReport.type,r)||(t.feedbackReport.type=r),r}),a(11,"option",14),h(12,"Selecione uma categoria"),s(),a(13,"option",15),h(14,"\u{1F41B} Bug"),s(),a(15,"option",16),h(16,"\u2728 Melhoria"),s(),a(17,"option",17),h(18,"\u{1F527} Ajustes"),s(),a(19,"option",18),h(20,"\u{1F528} Corre\xE7\xE3o"),s(),a(21,"option",19),h(22,"\u{1F3A8} Interface/Visual"),s(),a(23,"option",20),h(24,"\u2699\uFE0F Funcionalidade"),s(),a(25,"option",21),h(26,"\u{1F680} Performance"),s(),a(27,"option",22),h(28,"\u{1F5C2}\uFE0F Dados/Informa\xE7\xF5es"),s(),a(29,"option",23),h(30,"\u{1F4CC} Outros"),s()()(),a(31,"div",24)(32,"label",11)(33,"span",12),h(34,"Assunto"),s()(),a(35,"input",25),P("ngModelChange",function(r){return I(t.feedbackReport.subject,r)||(t.feedbackReport.subject=r),r}),s()()(),a(36,"div",26)(37,"label",27),h(38," Severidade: "),s(),a(39,"div",28)(40,"label",29)(41,"input",30),P("ngModelChange",function(r){return I(t.feedbackReport.severity,r)||(t.feedbackReport.severity=r),r}),s(),a(42,"span",31),h(43,"Baixa"),s()(),a(44,"label",29)(45,"input",32),P("ngModelChange",function(r){return I(t.feedbackReport.severity,r)||(t.feedbackReport.severity=r),r}),s(),a(46,"span",33),h(47,"M\xE9dia"),s()(),a(48,"label",29)(49,"input",34),P("ngModelChange",function(r){return I(t.feedbackReport.severity,r)||(t.feedbackReport.severity=r),r}),s(),a(50,"span",35),h(51,"Alta"),s()(),a(52,"label",29)(53,"input",36),P("ngModelChange",function(r){return I(t.feedbackReport.severity,r)||(t.feedbackReport.severity=r),r}),s(),a(54,"span",37),h(55,"Cr\xEDtica"),s()()()(),a(56,"div",38)(57,"label",11)(58,"span",12),h(59,"Descri\xE7\xE3o Detalhada"),s()(),a(60,"textarea",39),P("ngModelChange",function(r){return I(t.feedbackReport.description,r)||(t.feedbackReport.description=r),r}),s()(),a(61,"div",40)(62,"button",41),v("click",function(){return t.handleCancel()}),h(63," Cancelar "),s(),a(64,"button",42),v("click",function(){return t.submitFeedbackReport()}),z(65,Ye,2,0,"span",43)(66,Xe,1,0,"span",44),s()()()()),i&2&&(p(),_("ngIf",t.screenshotDataUrl),p(),_("ngIf",t.selectedElement()),p(),_("ngIf",t.screenshotDataUrl),p(7),F("ngModel",t.feedbackReport.type),p(25),F("ngModel",t.feedbackReport.subject),p(6),F("ngModel",t.feedbackReport.severity),p(4),F("ngModel",t.feedbackReport.severity),p(4),F("ngModel",t.feedbackReport.severity),p(4),F("ngModel",t.feedbackReport.severity),p(7),F("ngModel",t.feedbackReport.description),p(4),T("loading",t.isSubmitting),p(),_("ngIf",!t.isSubmitting),p(),_("ngIf",t.isSubmitting))},dependencies:[ce,se,le,ye,fe,ve,we,he,xe,be,me,pe,_e,ge,ue],styles:[".feedback-report-container[_ngcontent-%COMP%]{margin:0 auto}.tools-panel[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap;border-radius:8px}.tool-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px}.properties-panel[_ngcontent-%COMP%]{margin-bottom:20px}.property-group[_ngcontent-%COMP%]{margin-bottom:12px}.property-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-size:12px}.color-input[_ngcontent-%COMP%]{width:40px;height:30px;border:none;border-radius:4px;cursor:pointer}.color-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:4px;max-width:200px}.color-btn[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid transparent;border-radius:4px;cursor:pointer;transition:all .2s}.color-btn.selected[_ngcontent-%COMP%]{transform:scale(1.1)}.screenshot-container[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:8px;max-height:300px;overflow:auto}.image-canvas-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;max-width:100%}.screenshot-image[_ngcontent-%COMP%]{display:block;max-width:100%;height:auto;-webkit-user-select:none;user-select:none;pointer-events:none;border-radius:4px}.drawing-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:10}.cursor-crosshair[_ngcontent-%COMP%]{cursor:crosshair}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.text-input-overlay[_ngcontent-%COMP%]{position:absolute;padding:4px 8px;font-size:14px;border-radius:4px;z-index:20;min-width:100px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500}.form-actions[_ngcontent-%COMP%]{text-align:right}.btn-group[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}"]})}return o})();export{Mi as FeedbackComponent};
