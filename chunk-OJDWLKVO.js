import{a as O,c as j}from"./chunk-5267M4YT.js";import{c as H,f as W,i as A,o as N,p as R,q as G,t as z}from"./chunk-EUYLE5IP.js";import{k as F,l as L,w as B}from"./chunk-RLCM72IK.js";import{$b as k,Ca as y,Db as w,Ec as E,Ib as u,Jb as m,Ra as r,Vb as o,Wb as g,Xb as f,ab as D,ac as T,bc as I,g as M,ga as P,gb as v,oa as _,ob as c,pa as C,qa as b,ra as S,sb as V,xb as t,yb as n,zb as h}from"./chunk-27GLVKKX.js";function $(s,p){if(s&1&&(t(0,"option",39),o(1),n()),s&2){let e=p.$implicit;c("value",e),r(),f(" ",e," ")}}function q(s,p){if(s&1&&(t(0,"option",39),o(1),n()),s&2){let e=p.$implicit;c("value",e),r(),f(" ",e," ")}}function J(s,p){s&1&&(t(0,"div",40),h(1,"div",41),t(2,"span",42),o(3,"Carregando dados do CID-10..."),n()())}function U(s,p){if(s&1&&(t(0,"div",73),o(1),n()),s&2){let e=m().$implicit;r(),f(" ",e.note," ")}}function Z(s,p){if(s&1){let e=w();t(0,"tr",61)(1,"td")(2,"div",62),o(3),n()(),t(4,"td")(5,"div",63)(6,"div",64),o(7),n(),v(8,U,2,1,"div",65),n()(),t(9,"td")(10,"div",66),o(11),n()(),t(12,"td")(13,"div",48),o(14),n()(),t(15,"td",57)(16,"div",67)(17,"button",68),u("click",function(){let i=_(e).$implicit,l=m(2);return C(l.selectCid10(i))}),b(),t(18,"svg",69),h(19,"path",70),n(),o(20," Selecionar "),n(),S(),t(21,"button",71),u("click",function(){let i=_(e).$implicit,l=m(2);return C(l.viewDetails(i))}),b(),t(22,"svg",69),h(23,"path",72),n(),o(24," Detalhes "),n()()()()}if(s&2){let e=p.$implicit;r(3),g(e.code),r(4),g(e.description),r(),c("ngIf",e.note),r(3),g(e.category),r(3),g(e.chapter)}}function K(s,p){if(s&1){let e=w();t(0,"button",78),u("click",function(){let i=_(e).$implicit,l=m(3);return C(l.goToPage(i))}),o(1),n()}if(s&2){let e=p.$implicit,a=m(3);V(e===a.currentPage()?"btn btn-primary":"btn btn-outline"),r(),f(" ",e," ")}}function Q(s,p){if(s&1){let e=w();t(0,"div",74)(1,"div",75)(2,"button",76),u("click",function(){_(e);let i=m(2);return C(i.goToPage(i.currentPage()-1))}),o(3," \xAB "),n(),v(4,K,2,3,"button",77),t(5,"button",76),u("click",function(){_(e);let i=m(2);return C(i.goToPage(i.currentPage()+1))}),o(6," \xBB "),n()()()}if(s&2){let e=m(2);r(2),c("disabled",e.currentPage()===1),r(2),c("ngForOf",e.visiblePages())("ngForTrackBy",e.trackByPage),r(),c("disabled",e.currentPage()===e.totalPages())}}function X(s,p){s&1&&(t(0,"div",79)(1,"div",80),o(2,"\u{1F50D}"),n(),t(3,"h3",81),o(4,"Nenhum resultado encontrado"),n(),t(5,"p",82),o(6," Tente ajustar os filtros ou usar termos diferentes na busca "),n()())}function Y(s,p){if(s&1){let e=w();t(0,"div",43)(1,"div",2)(2,"div",44)(3,"h2",45),o(4," Resultados da Consulta "),t(5,"div",46),o(6),n()(),t(7,"div",47)(8,"span",48),o(9,"Itens por p\xE1gina:"),n(),t(10,"select",49),I("ngModelChange",function(i){_(e);let l=m();return T(l.itemsPerPage,i)||(l.itemsPerPage=i),C(i)}),u("change",function(){_(e);let i=m();return C(i.currentPage.set(1))}),t(11,"option",50),o(12,"10"),n(),t(13,"option",51),o(14,"25"),n(),t(15,"option",52),o(16,"50"),n(),t(17,"option",53),o(18,"100"),n()()()(),t(19,"div",54)(20,"table",55)(21,"thead")(22,"tr")(23,"th",56),o(24,"C\xF3digo"),n(),t(25,"th",56),o(26,"Descri\xE7\xE3o"),n(),t(27,"th",56),o(28,"Categoria"),n(),t(29,"th",56),o(30,"Cap\xEDtulo"),n(),t(31,"th",57),o(32,"A\xE7\xF5es"),n()()(),t(33,"tbody"),v(34,Z,25,5,"tr",58),n()()(),v(35,Q,7,4,"div",59)(36,X,7,0,"div",60),n()()}if(s&2){let e=m();r(6),g(e.filteredCid10().length),r(4),k("ngModel",e.itemsPerPage),r(24),c("ngForOf",e.paginatedResults())("ngForTrackBy",e.trackByCode),r(),c("ngIf",e.totalPages()>1),r(),c("ngIf",e.filteredCid10().length===0&&!e.isLoading())}}function ee(s,p){if(s&1&&(t(0,"div")(1,"label",87),o(2,"Notas:"),n(),t(3,"div",97),o(4),n()()),s&2){let e,a=m(2);r(4),f(" ",(e=a.selectedItem())==null?null:e.note," ")}}function te(s,p){if(s&1){let e=w();t(0,"div",83)(1,"div",84)(2,"h3",85),o(3,"Detalhes do CID-10"),n(),t(4,"div",86)(5,"div")(6,"label",87),o(7,"C\xF3digo:"),n(),t(8,"div",88),o(9),n()(),t(10,"div")(11,"label",87),o(12,"Descri\xE7\xE3o:"),n(),t(13,"div",89),o(14),n()(),t(15,"div",90)(16,"div")(17,"label",87),o(18,"Categoria:"),n(),t(19,"div",91),o(20),n()(),t(21,"div")(22,"label",87),o(23,"Cap\xEDtulo:"),n(),t(24,"div"),o(25),n()()(),v(26,ee,5,1,"div",92),n(),t(27,"div",93)(28,"button",94),u("click",function(){_(e);let i=m();return C(i.selectCid10(i.selectedItem()))}),o(29," Selecionar Este C\xF3digo "),n(),t(30,"button",95),u("click",function(){_(e);let i=m();return C(i.closeModal())}),o(31,"Fechar"),n()()(),t(32,"div",96),u("click",function(){_(e);let i=m();return C(i.closeModal())}),n()()}if(s&2){let e,a,i,l,d,x=m();r(9),f(" ",(e=x.selectedItem())==null?null:e.code," "),r(5),g((a=x.selectedItem())==null?null:a.description),r(6),g((i=x.selectedItem())==null?null:i.category),r(5),g((l=x.selectedItem())==null?null:l.chapter),r(),c("ngIf",(d=x.selectedItem())==null?null:d.note)}}function ne(s,p){if(s&1&&(t(0,"div",98)(1,"div",99),b(),t(2,"svg",100),h(3,"path",70),n(),S(),t(4,"span"),o(5),n()()()),s&2){let e=m();r(5),f("CID-10 selecionado: ",e.lastSelectedCode(),"")}}var me=(()=>{class s{http=P(O);cid10Data=y([]);isLoading=y(!0);searchTerm="";selectedChapter="";selectedCategory="";itemsPerPage=25;currentPage=y(1);selectedItem=y(null);showSelectionToast=y(!1);lastSelectedCode=y("");filteredCid10=E(()=>{let e=this.cid10Data();if(this.searchTerm.trim()){let a=this.searchTerm.toLowerCase().trim();e=e.filter(i=>i.code.toLowerCase().includes(a)||i.description.toLowerCase().includes(a)||i.note&&i.note.toLowerCase().includes(a))}return this.selectedChapter&&(e=e.filter(a=>a.chapter===this.selectedChapter)),this.selectedCategory&&(e=e.filter(a=>a.category===this.selectedCategory)),e});chapters=E(()=>{let e=new Set(this.cid10Data().map(a=>a.chapter));return Array.from(e).sort()});categories=E(()=>{let e=new Set(this.cid10Data().map(a=>a.category));return Array.from(e).sort()});totalPages=E(()=>Math.ceil(this.filteredCid10().length/this.itemsPerPage));paginatedResults=E(()=>{let e=(this.currentPage()-1)*this.itemsPerPage,a=e+this.itemsPerPage;return this.filteredCid10().slice(e,a)});visiblePages=E(()=>{let e=this.totalPages(),a=this.currentPage(),i=[],l=Math.max(1,a-2),d=Math.min(e,a+2);d-l<4&&(l===1?d=Math.min(e,l+4):l=Math.max(1,d-4));for(let x=l;x<=d;x++)i.push(x);return i});ngOnInit(){this.loadCid10Data()}loadCid10Data(){return M(this,null,function*(){try{let e=[{code:"E10.9",description:"Diabetes mellitus tipo 1 sem complica\xE7\xF5es",category:"Diabetes mellitus",chapter:"Doen\xE7as end\xF3crinas, nutricionais e metab\xF3licas",note:"Diabetes mellitus insulino-dependente sem men\xE7\xE3o de complica\xE7\xE3o"},{code:"E11.9",description:"Diabetes mellitus tipo 2 sem complica\xE7\xF5es",category:"Diabetes mellitus",chapter:"Doen\xE7as end\xF3crinas, nutricionais e metab\xF3licas",note:"Diabetes mellitus n\xE3o-insulino-dependente sem men\xE7\xE3o de complica\xE7\xE3o"},{code:"I10",description:"Hipertens\xE3o essencial",category:"Doen\xE7as hipertensivas",chapter:"Doen\xE7as do aparelho circulat\xF3rio"},{code:"J44.1",description:"Doen\xE7a pulmonar obstrutiva cr\xF4nica com exacerba\xE7\xE3o aguda",category:"Doen\xE7as cr\xF4nicas das vias a\xE9reas inferiores",chapter:"Doen\xE7as do aparelho respirat\xF3rio",note:"DPOC com exacerba\xE7\xE3o aguda n\xE3o especificada"},{code:"Z51.1",description:"Sess\xE3o de quimioterapia para neoplasia",category:"Pessoas em contato com servi\xE7os de sa\xFAde",chapter:"Fatores que influenciam o estado de sa\xFAde"},{code:"M79.3",description:"Paniculite n\xE3o especificada",category:"Outros transtornos dos tecidos moles",chapter:"Doen\xE7as do sistema osteomuscular"}];setTimeout(()=>{this.cid10Data.set(e),this.isLoading.set(!1)},1e3)}catch(e){console.error("Erro ao carregar dados CID-10:",e),this.isLoading.set(!1)}})}onSearch(){this.currentPage.set(1)}onFilterChange(){this.currentPage.set(1)}clearFilters(){this.searchTerm="",this.selectedChapter="",this.selectedCategory="",this.currentPage.set(1)}goToPage(e){e>=1&&e<=this.totalPages()&&this.currentPage.set(e)}selectCid10(e){this.lastSelectedCode.set(`${e.code} - ${e.description}`),this.showSelectionToast.set(!0),this.closeModal(),console.log("CID-10 selecionado:",e),setTimeout(()=>{this.showSelectionToast.set(!1)},3e3)}viewDetails(e){this.selectedItem.set(e)}closeModal(){this.selectedItem.set(null)}exportResults(){let e=this.filteredCid10(),a=this.convertToCSV(e);this.downloadCSV(a,"cid10-consulta.csv")}convertToCSV(e){let a=["C\xF3digo","Descri\xE7\xE3o","Categoria","Cap\xEDtulo","Notas"],i=e.map(l=>[l.code,l.description,l.category,l.chapter,l.note||""]);return[a,...i].map(l=>l.map(d=>`"${d}"`).join(",")).join(`
`)}downloadCSV(e,a){let i=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),d=URL.createObjectURL(i);l.setAttribute("href",d),l.setAttribute("download",a),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}trackByCode(e,a){return a.code}trackByPage(e,a){return a}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=D({type:s,selectors:[["app-cid10-consulta"]],decls:71,vars:15,consts:[[1,"container","mx-auto","p-6","max-w-7xl"],[1,"card","bg-base-100","shadow-xl","mb-6"],[1,"card-body"],[1,"card-title","text-3xl","text-primary"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-base-content/70"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"form-control"],[1,"label"],[1,"label-text","font-semibold"],[1,"input-group"],["type","text","placeholder","Ex: diabetes, J44.1, pneumonia...",1,"input","input-bordered","input-primary","w-full",3,"ngModelChange","input","ngModel"],[1,"btn","btn-primary"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"select","select-bordered","select-primary",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","gap-2","mt-4"],[1,"btn","btn-outline","btn-secondary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"btn","btn-outline","btn-accent",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-6"],[1,"stat","bg-primary","text-primary-content","rounded-lg"],[1,"stat-title","text-primary-content/70"],[1,"stat-value"],[1,"stat","bg-secondary","text-secondary-content","rounded-lg"],[1,"stat-title","text-secondary-content/70"],[1,"stat","bg-accent","text-accent-content","rounded-lg"],[1,"stat-title","text-accent-content/70"],[1,"stat","bg-neutral","text-neutral-content","rounded-lg"],[1,"stat-title","text-neutral-content/70"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","card bg-base-100 shadow-xl",4,"ngIf"],["class","modal modal-open",4,"ngIf"],["class","toast toast-top toast-end",4,"ngIf"],[3,"value"],[1,"flex","justify-center","items-center","py-12"],[1,"loading","loading-spinner","loading-lg","text-primary"],[1,"ml-3","text-lg"],[1,"card","bg-base-100","shadow-xl"],[1,"flex","justify-between","items-center","mb-4"],[1,"card-title"],[1,"badge","badge-primary"],[1,"flex","items-center","gap-2"],[1,"text-sm"],[1,"select","select-sm","select-bordered",3,"ngModelChange","change","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"overflow-x-auto"],[1,"table","table-zebra","w-full"],[1,"text-left"],[1,"text-center"],["class","hover:bg-base-200 transition-colors",4,"ngFor","ngForOf","ngForTrackBy"],["class","flex justify-center mt-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"hover:bg-base-200","transition-colors"],[1,"font-mono","font-bold","text-primary"],[1,"max-w-md"],[1,"font-medium"],["class","text-sm text-base-content/60 mt-1",4,"ngIf"],[1,"badge","badge-outline"],[1,"flex","justify-center","gap-1"],[1,"btn","btn-sm","btn-primary","btn-outline",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"btn","btn-sm","btn-info","btn-outline",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-base-content/60","mt-1"],[1,"flex","justify-center","mt-6"],[1,"btn-group"],[1,"btn","btn-outline",3,"click","disabled"],[3,"class","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[1,"text-center","py-12"],[1,"text-6xl","mb-4"],[1,"text-xl","font-semibold","mb-2"],[1,"text-base-content/60"],[1,"modal","modal-open"],[1,"modal-box","max-w-2xl"],[1,"font-bold","text-lg","mb-4"],[1,"space-y-4"],[1,"text-sm","font-semibold","text-base-content/70"],[1,"text-2xl","font-mono","font-bold","text-primary"],[1,"text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"badge","badge-outline","badge-lg"],[4,"ngIf"],[1,"modal-action"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-outline",3,"click"],[1,"modal-backdrop",3,"click"],[1,"text-sm","bg-base-200","p-3","rounded-lg"],[1,"toast","toast-top","toast-end"],[1,"alert","alert-success"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"]],template:function(a,i){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),b(),t(4,"svg",4),h(5,"path",5),n(),o(6," Consulta CID-10 "),n(),S(),t(7,"p",6),o(8," Sistema de consulta \xE0 Classifica\xE7\xE3o Internacional de Doen\xE7as - 10\xAA Revis\xE3o "),n()()(),t(9,"div",1)(10,"div",2)(11,"div",7)(12,"div",8)(13,"label",9)(14,"span",10),o(15,"Buscar por descri\xE7\xE3o ou c\xF3digo"),n()(),t(16,"div",11)(17,"input",12),I("ngModelChange",function(d){return T(i.searchTerm,d)||(i.searchTerm=d),d}),u("input",function(){return i.onSearch()}),n(),t(18,"button",13),b(),t(19,"svg",14),h(20,"path",15),n()()()(),S(),t(21,"div",8)(22,"label",9)(23,"span",10),o(24,"Cap\xEDtulo"),n()(),t(25,"select",16),I("ngModelChange",function(d){return T(i.selectedChapter,d)||(i.selectedChapter=d),d}),u("change",function(){return i.onFilterChange()}),t(26,"option",17),o(27,"Todos os cap\xEDtulos"),n(),v(28,$,2,2,"option",18),n()(),t(29,"div",8)(30,"label",9)(31,"span",10),o(32,"Categoria"),n()(),t(33,"select",16),I("ngModelChange",function(d){return T(i.selectedCategory,d)||(i.selectedCategory=d),d}),u("change",function(){return i.onFilterChange()}),t(34,"option",17),o(35,"Todas as categorias"),n(),v(36,q,2,2,"option",18),n()()(),t(37,"div",19)(38,"button",20),u("click",function(){return i.clearFilters()}),b(),t(39,"svg",21),h(40,"path",22),n(),o(41," Limpar Filtros "),n(),S(),t(42,"button",23),u("click",function(){return i.exportResults()}),b(),t(43,"svg",21),h(44,"path",24),n(),o(45),n()()()(),S(),t(46,"div",25)(47,"div",26)(48,"div",27),o(49,"Total de C\xF3digos"),n(),t(50,"div",28),o(51),n()(),t(52,"div",29)(53,"div",30),o(54,"Resultados"),n(),t(55,"div",28),o(56),n()(),t(57,"div",31)(58,"div",32),o(59,"Cap\xEDtulos"),n(),t(60,"div",28),o(61),n()(),t(62,"div",33)(63,"div",34),o(64,"Categorias"),n(),t(65,"div",28),o(66),n()()(),v(67,J,4,0,"div",35)(68,Y,37,6,"div",36)(69,te,33,5,"div",37)(70,ne,6,1,"div",38),n()),a&2&&(r(17),k("ngModel",i.searchTerm),r(8),k("ngModel",i.selectedChapter),r(3),c("ngForOf",i.chapters()),r(5),k("ngModel",i.selectedCategory),r(3),c("ngForOf",i.categories()),r(6),c("disabled",i.filteredCid10().length===0),r(3),f(" Exportar (",i.filteredCid10().length,") "),r(6),g(i.cid10Data().length),r(5),g(i.filteredCid10().length),r(5),g(i.chapters().length),r(5),g(i.categories().length),r(),c("ngIf",i.isLoading()),r(),c("ngIf",!i.isLoading()),r(),c("ngIf",i.selectedItem()),r(),c("ngIf",i.showSelectionToast()))},dependencies:[B,F,L,z,R,G,H,N,W,A,j],styles:["[_nghost-%COMP%]{display:block}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:hsl(var(--b2));font-weight:600}.modal-backdrop[_ngcontent-%COMP%]{background-color:#0000004d}.toast[_ngcontent-%COMP%]{z-index:1000}"]})}return s})();export{me as Cid10ConsultaComponent};
