import{b as N}from"./chunk-PDNVOUJD.js";import{a as E}from"./chunk-OJG6SKOA.js";import{b as x,d as R,e as F,f as D,g as I,h as W,i as T,l as P,m as B,n as O,o as A,q as j}from"./chunk-P5RULU64.js";import{$b as c,Cb as e,Db as t,Eb as M,Ic as k,Jb as u,Kb as _,Sc as w,Tb as o,Va as y,Za as l,Zb as d,_b as s,a as h,b,fa as g,g as C,gb as S,lb as v,tb as f}from"./chunk-R5P75FUM.js";function L(m,V){if(m&1&&(e(0,"div",36),M(1,"img",37),t()),m&2){let r=_();l(),f("src",r.feedbackReport.screenshot,y)}}var Z=(()=>{class m{captureService=g(N);screenCaptureModalService=g(E);modalId;onConfirm;onCancel;closeModal;severity="low";isCapturing=!1;feedbackReport={type:"",severity:this.severity,subject:"",description:"",screenshot:null};ngOnInit(){console.log("\u{1F4CB} FeedbackComponent inicializado com modalId:",this.modalId)}captureScreenshot(){return C(this,null,function*(){try{this.isCapturing=!0;let r={quality:.8,format:"png",scale:1,backgroundColor:"#ffffff"};console.log("\u{1F3A5} Iniciando captura, ocultando modal:",this.modalId);let p=this.modalId?[this.modalId]:[];this.screenCaptureModalService.startCapture(p),yield new Promise(a=>setTimeout(a,200));let n=yield this.captureService.captureScreen(r);this.screenCaptureModalService.endCapture(),console.log("\u{1F4F8} Captura conclu\xEDda com sucesso: ",n),this.feedbackReport.screenshot=n.dataUrl}catch(r){this.screenCaptureModalService.endCapture(),console.error("Erro ao capturar a tela:",r)}finally{this.isCapturing=!1}})}s2ubmitFeedbackReport(){if(!this.feedbackReport.subject||!this.feedbackReport.description||!this.feedbackReport.type){alert("Por favor, preencha todos os campos");return}console.log("Reporte de Feedback:",this.feedbackReport),this.resetForm()}handleConfirm1(){console.log("this.modalId:",this.modalId)}handleConfirm(){if(!this.feedbackReport.subject||!this.feedbackReport.description||!this.feedbackReport.type){alert("Por favor, preencha todos os campos");return}this.onConfirm&&this.onConfirm(b(h({},this.feedbackReport),{detailsData:{timestamp:new Date,browserInfo:this.getBrowserInfo(),screenResolution:this.getScreenResolution(),url:window.location.href,userAgent:navigator.userAgent}})),this.closeModal&&this.closeModal()}handleCancel(){this.onCancel&&this.onCancel(),console.log("this.closeModal:",this.closeModal),this.closeModal&&this.closeModal()}resetForm(){this.feedbackReport={type:"",severity:this.severity,subject:"",description:"",screenshot:null}}getBrowserInfo(){let r=navigator.userAgent;return r.includes("Chrome")?"Chrome":r.includes("Firefox")?"Firefox":r.includes("Safari")?"Safari":r.includes("Edge")?"Edge":"Desconhecido"}getScreenResolution(){return`${screen.width}x${screen.height}`}getCurrentDateTime(){return new Date().toLocaleString("pt-BR")}static \u0275fac=function(p){return new(p||m)};static \u0275cmp=S({type:m,selectors:[["app-feedback"]],inputs:{modalId:"modalId",onConfirm:"onConfirm",onCancel:"onCancel"},decls:67,vars:8,consts:[[1,"feedback-container"],[1,"form-group","flex","gap-4"],[1,"flex-shrink-0","flex","flex-col"],[1,"label"],[1,"label-text","font-semibold"],["name","type",1,"select","select-bordered","w-48",3,"ngModelChange","ngModel"],["value",""],["value","BUG"],["value","MELHORIA"],["value","AJUSTES"],["value","CORRECAO"],["value","interface"],["value","funcionalidade"],["value","performance"],["value","dados"],["value","outros"],[1,"flex-1"],["name","subject","placeholder","Resumo do problema","required","",1,"input","input-bordered","w-full",3,"ngModelChange","ngModel"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","justify-between"],[1,"flex","items-center"],["type","radio","name","severity","value","low",1,"mr-2",3,"ngModelChange","ngModel"],[1,"text-green-600"],["type","radio","name","severity","value","medium",1,"mr-2",3,"ngModelChange","ngModel"],[1,"text-yellow-600"],["type","radio","name","severity","value","high",1,"mr-2",3,"ngModelChange","ngModel"],[1,"text-orange-600"],["type","radio","name","severity","value","critical",1,"mr-2",3,"ngModelChange","ngModel"],[1,"text-red-600"],[1,"form-group"],["name","description","rows","4","placeholder","Descreva detalhadamente o problema encontrado","required","",1,"textarea","textarea-bordered","w-full",3,"ngModelChange","ngModel"],["class","screenshot-preview",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-outline","btn-secondary","mr-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"screenshot-preview"],["alt","Screenshot",1,"screenshot-image",3,"src"]],template:function(p,n){p&1&&(e(0,"div",0)(1,"form")(2,"div",1),o(3," ANTIGO!!!! "),e(4,"div",2)(5,"label",3)(6,"span",4),o(7,"Tipo de Feedback"),t()(),e(8,"select",5),c("ngModelChange",function(i){return s(n.feedbackReport.type,i)||(n.feedbackReport.type=i),i}),e(9,"option",6),o(10,"Selecione uma categoria"),t(),e(11,"option",7),o(12,"\u{1F41B} Bug"),t(),e(13,"option",8),o(14,"\u2728 Melhoria"),t(),e(15,"option",9),o(16,"\u{1F527} Ajustes"),t(),e(17,"option",10),o(18,"\u{1F528} Corre\xE7\xE3o"),t(),e(19,"option",11),o(20,"Interface/Visual"),t(),e(21,"option",12),o(22,"Funcionalidade"),t(),e(23,"option",13),o(24,"Performance"),t(),e(25,"option",14),o(26,"Dados/Informa\xE7\xF5es"),t(),e(27,"option",15),o(28,"Outros"),t()()(),e(29,"div",16)(30,"label",3)(31,"span",4),o(32,"Assunto"),t()(),e(33,"input",17),c("ngModelChange",function(i){return s(n.feedbackReport.subject,i)||(n.feedbackReport.subject=i),i}),t()()(),e(34,"div",18)(35,"label",19),o(36," Severidade: "),t(),e(37,"div",20)(38,"label",21)(39,"input",22),c("ngModelChange",function(i){return s(n.severity,i)||(n.severity=i),i}),t(),e(40,"span",23),o(41,"Baixa"),t()(),e(42,"label",21)(43,"input",24),c("ngModelChange",function(i){return s(n.severity,i)||(n.severity=i),i}),t(),e(44,"span",25),o(45,"M\xE9dia"),t()(),e(46,"label",21)(47,"input",26),c("ngModelChange",function(i){return s(n.severity,i)||(n.severity=i),i}),t(),e(48,"span",27),o(49,"Alta"),t()(),e(50,"label",21)(51,"input",28),c("ngModelChange",function(i){return s(n.severity,i)||(n.severity=i),i}),t(),e(52,"span",29),o(53,"Cr\xEDtica"),t()()()(),e(54,"div",30)(55,"label",3)(56,"span",4),o(57,"Descri\xE7\xE3o Detalhada"),t()(),e(58,"textarea",31),c("ngModelChange",function(i){return s(n.feedbackReport.description,i)||(n.feedbackReport.description=i),i}),t()(),v(59,L,2,1,"div",32),e(60,"div",33)(61,"button",34),u("click",function(){return n.captureScreenshot()}),o(62," Capture Tela "),t(),e(63,"button",34),u("click",function(){return n.handleCancel()}),o(64," Cancelar "),t(),e(65,"button",35),u("click",function(){return n.handleConfirm1()}),o(66," Enviar Reporte "),t()()()()),p&2&&(l(8),d("ngModel",n.feedbackReport.type),l(25),d("ngModel",n.feedbackReport.subject),l(6),d("ngModel",n.severity),l(4),d("ngModel",n.severity),l(4),d("ngModel",n.severity),l(4),d("ngModel",n.severity),l(7),d("ngModel",n.feedbackReport.description),l(),f("ngIf",n.feedbackReport.screenshot))},dependencies:[w,k,j,W,B,O,x,P,T,R,F,A,I,D],styles:[".feedback-container[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.screenshot-preview[_ngcontent-%COMP%]{margin-bottom:20px;max-height:300px;overflow:auto}.screenshot-image[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ddd;border-radius:4px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-actions[_ngcontent-%COMP%]{text-align:right}"]})}return m})();export{Z as FeedbackComponent1};
