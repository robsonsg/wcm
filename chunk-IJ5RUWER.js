import{f as D}from"./chunk-CY23AJYG.js";import{a as V}from"./chunk-CADL5OGT.js";import{b as T,c as G,d as f,f as z,g as H,j as A,m as q,n as P,s as N,u as B}from"./chunk-OVH4RFKH.js";import{w as F}from"./chunk-HOG6MQQB.js";import{Bb as C,Ca as S,Fb as g,Kb as e,Lb as n,Mb as r,Vb as _,Wb as k,ab as l,g as M,ga as w,gc as a,hc as L,lb as E,qa as m,ra as u,rb as c,v as y,zb as x}from"./chunk-5HUFPCHR.js";function j(t,d){t&1&&(e(0,"label",12)(1,"span",29),a(2,"Usu\xE1rio \xE9 obrigat\xF3rio"),n()())}function I(t,d){t&1&&(m(),r(0,"path",30)(1,"path",31)(2,"path",32))}function U(t,d){t&1&&(m(),r(0,"path",33)(1,"path",34))}function R(t,d){t&1&&(e(0,"label",12)(1,"span",29),a(2,"Senha \xE9 obrigat\xF3ria"),n()())}function O(t,d){if(t&1&&(e(0,"div",24),m(),e(1,"svg",35),r(2,"path",36),n(),u(),e(3,"span"),a(4),n()()),t&2){let o=k();l(4),L(o.errorMessage())}}function W(t,d){t&1&&(r(0,"span",37),a(1," Entrando... "))}function J(t,d){t&1&&(m(),e(0,"svg",38),r(1,"path",39),n(),a(2," Entrar "))}var ie=(()=>{class t{fb=w(N);router=w(D);http=w(V);isLoading=S(!1);errorMessage=S("");showPassword=S(!1);loginForm;constructor(){this.loginForm=this.fb.group({username:["",[f.required,f.minLength(3)]],password:["",[f.required,f.minLength(6)]],rememberMe:[!1]})}togglePasswordVisibility(){this.showPassword.update(o=>!o)}onSubmit(){return M(this,null,function*(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading.set(!0),this.errorMessage.set("");try{let o=this.loginForm.value,s=yield y(this.http.post("/api/auth/login",{username:o.username,password:o.password,rememberMe:o.rememberMe}));s.success?(s.token&&(o.rememberMe?(localStorage.setItem("authToken",s.token),localStorage.setItem("rememberUser","true")):sessionStorage.setItem("authToken",s.token)),yield this.router.navigate(["/dashboard"])):this.errorMessage.set(s.message||"Erro no login. Verifique suas credenciais.")}catch(o){console.error("Erro no login:",o),o.status===401?this.errorMessage.set("Usu\xE1rio ou senha inv\xE1lidos."):o.status===0?this.errorMessage.set("Erro de conex\xE3o. Verifique sua internet."):this.errorMessage.set("Erro interno do servidor. Tente novamente.")}finally{this.isLoading.set(!1)}})}static \u0275fac=function(s){return new(s||t)};static \u0275cmp=E({type:t,selectors:[["app-login"]],decls:48,vars:12,consts:[[1,"min-h-screen","bg-base-200","flex","items-center","justify-center","px-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"avatar","mb-4"],[1,"w-16","rounded-full","bg-primary"],["fill","currentColor","viewBox","0 0 20 20",1,"w-10","h-10","m-3","text-primary-content"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],[1,"text-2xl","font-bold","text-base-content"],[1,"text-base-content/60","mt-1"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label"],[1,"label-text","font-medium"],[1,"relative"],["type","text","formControlName","username","placeholder","Digite seu usu\xE1rio",1,"input","input-bordered","w-full","pl-10","focus:pl-10"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","absolute","left-3","top-2.5","text-base-content/40","pointer-events-none","z-10"],["formControlName","password","placeholder","Digite sua senha",1,"input","input-bordered","w-full","pl-10","pr-10","focus:pl-10","focus:pr-10",3,"type"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],["type","button","tabindex","-1",1,"absolute","right-3","top-2.5","text-base-content/40","hover:text-base-content","z-10","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"h-5","w-5","text-gray-400","hover:text-gray-600"],[1,"cursor-pointer","label","justify-start","gap-3"],["type","checkbox","formControlName","rememberMe",1,"checkbox","checkbox-primary","checkbox-sm"],[1,"label-text"],[1,"alert","alert-error"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"text-center","space-y-2"],["type","button",1,"link","link-primary","text-sm"],[1,"label-text-alt","text-error"],["d","M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7 7 0 0 0-2.79.588l.77.771A6 6 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755q-.247.248-.517.486z"],["d","M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829"],["d","M3.35 5.47q-.27.24-.518.487A13 13 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7 7 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12z"],["d","M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"],["d","M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"]],template:function(s,i){if(s&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),m(),e(6,"svg",6),r(7,"path",7),n()()(),u(),e(8,"h1",8),a(9,"WebCareManager System"),n(),e(10,"p",9),a(11,"Sistema de Gest\xE3o de HomeCare"),n()(),e(12,"form",10),_("ngSubmit",function(){return i.onSubmit()}),e(13,"div",11)(14,"label",12)(15,"span",13),a(16,"Usu\xE1rio"),n()(),e(17,"div",14),r(18,"input",15),m(),e(19,"svg",16),r(20,"path",7),n()(),c(21,j,3,0,"label",12),n(),u(),e(22,"div",11)(23,"label",12)(24,"span",13),a(25,"Senha"),n()(),e(26,"div",14),r(27,"input",17),m(),e(28,"svg",16),r(29,"path",18),n(),u(),e(30,"button",19),_("click",function(){return i.togglePasswordVisibility()}),m(),e(31,"svg",20),c(32,I,3,0)(33,U,2,0),n()()(),c(34,R,3,0,"label",12),n(),u(),e(35,"div",11)(36,"label",21),r(37,"input",22),e(38,"span",23),a(39,"Lembrar-me"),n()()(),c(40,O,5,1,"div",24),e(41,"div",25)(42,"button",26),c(43,W,2,0)(44,J,3,0),n()(),e(45,"div",27)(46,"button",28),a(47," Esqueci minha senha "),n()()()()()()),s&2){let p,h,v,b;l(12),x("formGroup",i.loginForm),l(6),C("input-error",((p=i.loginForm.get("username"))==null?null:p.invalid)&&((p=i.loginForm.get("username"))==null?null:p.touched)),l(3),g((h=i.loginForm.get("username"))!=null&&h.invalid&&((h=i.loginForm.get("username"))!=null&&h.touched)?21:-1),l(6),C("input-error",((v=i.loginForm.get("password"))==null?null:v.invalid)&&((v=i.loginForm.get("password"))==null?null:v.touched)),x("type",i.showPassword()?"text":"password"),l(5),g(i.showPassword()?32:33),l(2),g((b=i.loginForm.get("password"))!=null&&b.invalid&&((b=i.loginForm.get("password"))!=null&&b.touched)?34:-1),l(6),g(i.errorMessage()?40:-1),l(2),x("disabled",i.loginForm.invalid||i.isLoading()),l(),g(i.isLoading()?43:44)}},dependencies:[F,B,A,G,T,z,H,q,P],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})}return t})();export{ie as LoginComponent};
